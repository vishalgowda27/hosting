var __assign,__spreadArray,SvCtrlV2;(function(n){n.ColListName="ColLst";n.PaneCookieName="prsmseop";n.TS="TS";n.SavableEntityCN="isv";n.SavedCN="saved";n.SaveCtrlContainerCN="isvctrl";n.FlyoutErrorCN="err";n.InProgressCN="ing";n.GetErrCN="b_geterr";n.FocusCN="isvfoc";n.HoverCN="b_isvhvr";n.SaveCtrlHoveredCN="b_schvr";n.CurrentElementCN="b_isvcur";n.PersBtnHoveredCN="b_scpers";n.NarrowImageCN="b_nrrwimg";n.NarrowImageRightCN="b_nrrwimgr";n.NarrowImageBottomCN="b_nrrwimgb";n.HasFlyoutCN="b_flyt";n.FlyoutActiveCN="b_scactive";n.ErrDispCN="b_scdisp";n.DeactivateCN="scdactve";n.ErrStateVisibleCN="errvsbl";n.ErrStateInvisibleCN="errinvsbl";n.RemovableCN=[n.SavedCN,n.FocusCN,n.HoverCN,n.InProgressCN,n.FlyoutErrorCN,n.SaveCtrlHoveredCN];n.MobFlyoutCloseCN="b_cls";n.MobFlyoutShowCN="b_shw";n.LabelSlideCN="b_lblsld";n.SaveControlItemCN="b_svcitm";n.SaveControlLinkCN="b_svclnk";n.SaveControlLinkPCN="b_ignbt";n.SaveControlImageCN="b_svcimg";n.SaveControlImage2CN="b_svcimg2";n.SaveControlImage3CN="b_svcimg3";n.SvCtrlPersIcnCN="scpersicn";n.FlyoutOverrideCN="sc3olfp";n.FlyoutOverrideLCN="sc3olfpl";n.FlyoutOverrideRCN="sc3olfpr";n.CollectionAttr="collection";n.CollectionItemIdAttr=n.CollectionAttr+"ItemId";n.IsSuccessAttr="isSuccess";n.ParentElementAttr="parentElement";n.UndefinedString="undefined";n.RelatedTargetAttr="relatedTarget";n.CurrentTargetAttr="currentTarget";n.TargetAttr="target";n.PixelUnit="px";n.SavesGenericItemDataAttr="data-saves-generic-item";n.ScrollBindDataAttr="data-scrbind";n.ClassListAttr="classList";n.CollectionIdDataAttribute="data-svcid";n.SuggestedCollectionTitleAttribute="data-svcsugcoltitle";n.KCTDataAttr="data-svkct";n.SavedDataAttr="data-svd";n.SaveErrorMapAttr="data-save-error-map";n.SaveA11yMapAttr="data-save-a11y-map";n.ComponentIdDataAttr="data-svcptid";n.AriaLabelAttr="aria-label";n.TabindexAttr="tabindex";n.AltTextAttr="alt-text";n.TitleAttr="title";n.AriaPressedAttr="aria-pressed";n.MaxHeightAttr="max-height";n.AddCollToListEN="addCollToList";n.RemoveCollFromList="removeCollFromList";n.RemoveCollFromSugList="removeCollFromSugList";n.PartnerRegisterEN="onPartnerRegister";n.DeregisterPersBtnEN="onDeregisterPersBtn";n.UpdateHoverBoxEN="onUpdateHoverBox";n.scEngagementEN="onSCEngagement";n.FocusInEN=["mouseenter","focusin"];n.FocusOutEN=["mouseleave","focusout"];n.CollListExpandEN="onCollListExpand";n.VisualStateChangedEN="onVisualStateChanged";n.CollectionsGottenEN="onCollectionsGotten";n.HostSavesControlClickedEN="onHostSavesControlClicked";n.PersButtonInteractEN="onPersButtonInteract";n.SaveAddEN="onSaveAdd";n.SaveDelEN="onSaveDel";n.SaveControlA11yEN="onSaveControlA11y";n.SaveControlErrorEN="onSaveControlError";n.ControlAppendedEN="onControlAppended";n.CurrentCollIdSetEN="onCurrentCollIdSet";n.SaveButtonClickFeedPg="onSvCtrlClickFdPg";n.HoverElementSetEN="onHoverElementSet";n.HoverElementSuggestedCollectionEN="onHoverElementSuggestedCollection";n.HoverElementTopChoicesEN="hoverElementTopChoicesEN";n.SaveButtonClickEN="onSaveButtonClick";n.SaveButtonFocusEN="onSaveButtonFocus";n.ChevronToggleCollListEN="onBtnToggleCollList";n.FavAddEN="onFavAdd";n.FavDeleteEN="onFavDel";n.CollBCLoadedEN="CollectionsBCLoaded";n.CurrentElementSetEN="onCurrentElementSet";n.UpdateSaveStateEN="updateSaveState";n.LoadingSuggestedCollection="loadingSuggestedCollection";n.CurrentCollIdUnsetEN="onCurrentCollIdUnset";n.ChangeCollThumbnail="onChangeCollThumbnail";n.HoverContainerHideEN="onHoverContainerHide";n.KeydownEN="keydown";n.TypeToAttributeMap={webdoc:"url",recipe:"sid",video:"mid",image:"cid",product:"cid"};n.ScrollEvent="scroll";n.ResizeEvent="resize";n.CustomCollDummyId="CustomCollId";n.SuggestedCollDummyId="SuggestedCollId";n.IcnsBGColorCss="--icn-bg-color";n.IcnLblTxtClrCss="--svlbl-txt-color";n.SavedIcnCss="--svicn-bg-img";n.UnsavedIcnCss="--unsvicn-bg-img";n.SavedPromIcnCss="--svicn-bg-img-prominent";n.UnsavedPromIcnCss="--unsvicn-bg-img-prominent";n.SavePromClrCss="#5087EC";n.SavePromTxtClrCss="#FFFFFF";n.FlyoutBGClrCss="--flyout-bg-clr";n.FlyoutLnkClrCss="--flyout-lnk-clr";n.FlyoutTxtClrCss="--flyout-txt-clr";n.UiErrorStates=["Ok","AddItem","RemoveItem","GetCollection","CreateCollection","Mismatch","Intermittent","BadItemData"];n.observerConfig={childList:!0,subtree:!0,attributes:!0};n.SwipeBehavior=["NoBehavior","SwipeToResize","SwipeToClose","SwipeToCloseFixedSize"]})(SvCtrlV2||(SvCtrlV2={})),function(n){function o(t){return t&&w(t,n.SavableEntityCN)}function r(t){n.keepFlyoutActive=t}function d(){return n.keepFlyoutActive}function g(n){if(!_w.Map)return null;var t=new Map;return n&&t.set("type",n),t}function nt(t,i){var r,u;return t?(r=i in n.TypeToAttributeMap?n.TypeToAttributeMap[i]:null,!r)?t:(u=i+":"+r+"=",(t.indexOf(u)!==0?u:"")+t):null}function a(n,t){return n?_qs("["+t+"]",n):null}function tt(t){var i=a(n.containerElement,n.sourceAttribute+'*="'+t+'"'),r;return i?(r=v(i),!r?i:r):null}function s(n,t){try{var i=_d.elementsFromPoint(n,t)||[];return Array.prototype.slice.call(i)}catch(r){return[]}}function v(t){for(var i=t;i&&!o(i)&&i[n.ParentElementAttr];)i=i[n.ParentElementAttr];return o(i)?i:null}function it(n){var t,i;return n.thumbnailUrl||((i=(t=n.thumbnails)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.thumbnailUrl)}function u(n,t){for(var f,r,u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];for(f=n&&n.length||0,r=0;r<f;r++)t(n[r],u)}function rt(n){try{return JSON.parse(n)}catch(t){return null}}function h(n,t){if(n)for(var i in n)t(i,n[i])}function ut(n,t){var i=n;return h(t,function(n,t){i[n]=t}),i}function ft(n){var i;if(n&&n.target){var t=(i=n.target)===null||i===void 0?void 0:i.getBoundingClientRect(),r=t.x,f=t.right,e=t.y,o=t.bottom,h=s((r+f)/2,(e+o)/2);u(h,function(n){n.tagName==="A"&&n.hasAttribute("h")&&_w.si_T&&_w.si_T(n.getAttribute("h"))})}}function et(t,i,r,u,f){n.standalone&&sj_evt.fire(n.scEngagementEN,t,i,r,u,f)}function f(t){n.hoverContainer&&t&&h(t,function(t,i){n.hoverContainer.style.setProperty(t,i)})}function ot(){n.hoverContainer&&n.shouldShowFlyout&&f({display:"block"})}function st(){n.hoverContainer&&(f({display:"none"}),sj_evt.fire(n.HoverContainerHideEN))}function ht(i){var e=i||n.currentHoveredItem.Element;if(n.hoverContainer&&e&&!n.isMobileView){r(!0);var s=_w.scrollX||_w.pageXOffset,h=_w.scrollY||_w.pageYOffset,u=t(e);if(!u){r(!1);return}var o=u.top,c=u.bottom,l=u.left,a=u.width,v=u.height,y=c>_w.innerHeight?_w.innerHeight-o:v;f({width:a+n.PixelUnit,height:y+n.PixelUnit,top:o+h+n.PixelUnit,left:l+s+n.PixelUnit});r(!1)}}function ct(n,t){if(!(n&&t))return!1;try{return n.contains(t)}catch(i){return!1}}function t(n){if(!n)return null;try{return n.getBoundingClientRect()}catch(t){return null}}function lt(n,i){var r;if(!(n&&i))return!1;try{if(r=t(n),!r)return;var f=r.x,e=r.y,u=s(f,e);return(u===null||u===void 0?void 0:u.length)&&u.indexOf(i)>-1}catch(o){return!1}}function at(t){var i,r;if(!t||!n.localCollectionNames)return!1;i=t.toLowerCase();for(r in n.localCollectionNames)if(i==r.toLowerCase())return!0;return!1}function vt(n,t){var i,r;return!n||!t?null:Element.prototype.closest?n.closest(t):(i=Element.prototype.matches?Element.prototype.matches:Element.prototype.webkitMatchesSelector?Element.prototype.webkitMatchesSelector:Element.prototype.msMatchesSelector,!i)?null:(r=function(n,t){var r=n;do{if(i.call(r,t))return r;r=r.parentElement||r.parentNode}while(r&&r.nodeType===1);return null},r(n,t))}function yt(n){return n&&n.tagName==="A"}function i(n,t,i){n&&t&&i&&n.addEventListener(t,i)}function pt(n,t,r){n&&u(n,function(n){i(n,t,r)})}function y(n,t){i(n,"keydown",function(n){n.keyCode==13&&t(n)})}function wt(n,t,r,u){if(r===void 0&&(r=!0),u===void 0&&(u=!0),n&&t){var f=u?function(n){sj_pd(n);n.stopImmediatePropagation();t(n)}:t;i(n,"click",f);r&&y(n,f)}}function bt(t,i){t&&i&&p(t,n.FocusInEN,i)}function kt(t,i){t&&i&&p(t,n.FocusOutEN,i)}function p(n,t,r){n&&r&&u(t,function(t){i(n,t,r)})}function w(t,i){if(!t||!i)return!1;var r=t[n.ClassListAttr];return r&&r.contains(i)}function b(t,i,r){t&&t[n.ClassListAttr]&&t[n.ClassListAttr][r](i)}function c(n,t){b(n,t,"add")}function e(n,t){b(n,t,"remove")}function dt(t){!t||n.standalone||n.isMobileView||n.currentHoveredItem.Element===t&&l(_ge("svctrlhvrpnling"))}function gt(t){t&&e(t,n.InProgressCN);l(_ge("svctrlhvrpnltxt"))}function ni(n,t,i){return(i===void 0&&(i=""),n&&n.children&&t)?n.querySelectorAll("."+t+i):[]}function ti(n,t){var r=this,i;return t===void 0&&(t=300),function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];sb_ct(i);i=sb_st(function(){n.apply(r,f)},t)}}function ii(t){var i;if(!t)return"";if(t.turl)return t.turl;if(i=t.ThumbnailInfo&&t.ThumbnailInfo.length>=1?t.ThumbnailInfo[0]:t.FavIcon,i){var r=i.Thumbnail,u=i.ThumbnailId,f=i.ExternalThumbnailUrl,e=(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bngd)!==n.UndefinedString?n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bngd:"";return r?r:u?"".concat(e,"/th?id=").concat(u):f||""}return""}function k(n){if(!(n&&n.content&&n.itemType))return null;var t=n.content,i=n.itemType;switch(i){case"Image":return t.imageId;case"Video":return t.videoId;case"Generic":return t.contentId;default:return null}}function ri(t){if(!t)return null;var u=t&&t[n.CollectionItemIdAttr],i=u?decodeURIComponent(u):"",r=k(t);return r||(r=/^[a-z]+:[a-z]+=/.test(i)?i.substring(i.indexOf("=")+1):i.replace("/"+n.partnerKey+"/:","")),{contentId:r,collectionItemId:i}}function ui(t,i){typeof _w!==n.UndefinedString&&typeof _w.history!==n.UndefinedString&&_w.history.pushState(t,"",i)}function fi(t){var i=_qs(".svbtnlbl",n.ctrlBtn);i&&(t?c(i,n.LabelSlideCN):e(i,n.LabelSlideCN))}function l(t){if(t){var i=_qs(".b_sclbl",n.flyoutContainer);i!==t&&(e(i,"b_sclbl"),c(t,"b_sclbl"))}}function ei(n,t){var i;return function(){for(var f,e=this,u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];f=!i;clearTimeout(i);i=setTimeout(function(){i=null;f||n.apply(e,u)},t);f&&n.apply(this,u)}}function oi(){var u,f=t(n.ctrl),r=t(_d.body),i=f!==null&&f!==void 0?f:{},o=i.top,v=o===void 0?0:o,s=i.bottom,y=s===void 0?0:s,h=i.left,p=h===void 0?0:h,c=i.right,w=c===void 0?0:c,l=i.height,b=l===void 0?0:l,a=i.width,k=a===void 0?0:a,d=r?Math.min(r.height,_w.innerHeight):_w.innerHeight,g=r?Math.min(r.width,_w.innerWidth):_w.innerWidth,nt=_ge("b_header"),e=t(nt),tt=(u=e===null||e===void 0?void 0:e.bottom)!==null&&u!==void 0?u:0;return{top:v-tt,bottom:d-y,left:p,right:g-w,saveControlHeight:b,saveControlWidth:k}}n.isSavableEntity=o;n.setKeepFlyoutActive=r;n.getKeepFlyoutActive=d;n.getUrlParamsForTelemetry=g;n.getValidCid=nt;n.getElementWithAttr=a;n.getElementFromMid=tt;n.elementsFromPoint=s;n.getCurrentHoveredItem=v;n.getTbnlUrlFrmGetCollResp=it;n.iterateThroughList=u;n.parseJsonString=rt;n.iterateOverObject=h;n.objectAssign=ut;n.fireOverlapping=ft;n.fireSCEngagementEvent=et;n.setHoverContainerStyle=f;n.showHoverContainer=ot;n.hideHoverContainer=st;n.positionHoverContainer=ht;n.elementContains=ct;n.getClientRect=t;n.isElementInSpaceOfAnother=lt;n.isCollectionExists=at;n.getClosest=vt;n.isAnchorElement=yt;n.addListenerToElement=i;n.addListenerToElements=pt;n.addEnterKeyListener=y;n.addClickListener=wt;n.addInListeners=bt;n.addOutListeners=kt;n.elementHasClass=w;n.addElementClass=c;n.removeElementClass=e;n.addInProgress=dt;n.removeInProgress=gt;n.selectChildrenOfClass=ni;n.debounce=ti;n.getThumnailFromItemMD=ii;n.getContentId=k;n.getItemIds=ri;n.updateWindowHistory=ui;n.addRemoveSlideLableClass=fi;n.switchLabelState=l;n.debounceWithLeading=ei;n.getSaveControlViewPortOffsets=oi}(SvCtrlV2||(SvCtrlV2={}));__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},function(n){function r(i,r,u,f,e){typeof t.getSuggestedTitle!==n.UndefinedString&&t.getSuggestedTitle(n.currentComponentId,n.urlParams,i,r,u,"",f,e)}function u(i,r){typeof t.getCollections!==n.UndefinedString&&t.getCollections(n.currentComponentId,n.urlParams,i,r)}function f(r,u,f,e){var h=1,c=n.currentHoveredItem.Element;if(!c){n.removeInProgress();return}var l=f in Constants.PredefinedCollections,a=l?Constants.PredefinedCollections[f]:null,o=__assign({},n.currentHoveredItem),s=o.Metadata;if(c.hasAttribute(n.SavesGenericItemDataAttr)&&typeof t.addEdgeGenericItem!==n.UndefinedString){t.addEdgeGenericItem(n.parseJsonString(c.getAttribute(n.SavesGenericItemDataAttr)),f,function(n){return r(n,o,!0,e,!1,f)},function(){return u(h,o.Element)},n.currentCompName);return}if(!s){u(7,o.Element);return}i(s,o.ItemType)&&typeof t.addGenericItem!==n.UndefinedString?t.addGenericItem(n.currentCompName,n.currentUrlParams,s,n.itemTagPath,l?a:null,n.localCollectionsMap[f],f,n.partnerKey,null,function(n){return r(n,o,!0,e,!1,f)},function(){return u(h,o.Element)}):typeof t.addNonGenericItem!==n.UndefinedString&&t.addNonGenericItem(n.currentCompName,n.currentUrlParams,s,o.ItemType,n.itemSchema,f,l?a:null,n.localCollectionsMap[f],function(n){return r(n,o,!1,e,!1,f)},function(){return u(h,o.Element)})}function e(r,u,f,e){var h,c,o,s;if(e===void 0&&(e="Flyt"),h=1,c=n.currentHoveredItem.Element,!c){n.removeInProgress();return}if(o=__assign({},n.currentHoveredItem),s=o.Metadata,c.hasAttribute(n.SavesGenericItemDataAttr)&&typeof t.addEdgeGenericItemToNewColl!==n.UndefinedString){t.addEdgeGenericItemToNewColl(n.parseJsonString(c.getAttribute(n.SavesGenericItemDataAttr)),f,function(n){return r(n,o,!0,e,!0,"",f)},function(){return u(h,o.Element)},n.currentCompName);return}if(!s){u(7,o.Element);return}i(s,o.ItemType)&&typeof t.addGenericItem!==n.UndefinedString?t.addGenericItem(n.currentCompName,n.currentUrlParams,s,n.itemTagPath,null,f,null,n.partnerKey,n.collTagPath,function(n){return r(n,o,!0,e,!0,"",f)},function(){return u(h,o.Element)}):f&&typeof t.addNonGenericItem!==n.UndefinedString&&t.addNonGenericItem(n.currentCompName,n.currentUrlParams,s,o.ItemType,n.itemSchema,null,null,f,function(n){return r(n,o,!1,e,!0,"",f)},function(){return u(h,o.Element)})}function o(r,u,f,e){var c=2,l=n.currentHoveredItem.Element,h;if(!l){n.removeInProgress();return}var o=__assign({},n.currentHoveredItem),a=o.Mid,s=n.localSavedItemsMap[a];if(!s){n.removeInProgress();return}(l.hasAttribute(n.SavesGenericItemDataAttr)||i(o.Metadata,o.ItemType))&&typeof t.deleteGenericItem!==n.UndefinedString?t.deleteGenericItem(n.currentCompName,n.currentUrlParams,s.cid,n.kctColls[f]||f,function(n){return r(n,o,f,e,!0)},function(){return u(c,o.Element)}):typeof t.deleteNonGenericItem!==n.UndefinedString&&(h=f in Constants.PredefinedCollections,t.deleteNonGenericItem(n.currentCompName,n.currentUrlParams,h?Constants.PredefinedCollections[f]:"",h?"":f,s.cid,o.ItemType,function(n){return r(n,o,f,e,!1)},function(){return u(c,o.Element)}))}function i(t,i){return(i===void 0&&(i=n.defaultItemType),!t)?!1:!("mid"in t)&&i!=="recipe"}var t=MySavesAPIUtils;n.getSuggestedTitles=r;n.getCollections=u;n.addToCollection=f;n.addToNewCollection=e;n.removeFromCollection=o}(SvCtrlV2||(SvCtrlV2={})),function(n){function i(t){if(n.itemSchema||(n.itemSchema={}),t&&t.length>0){var i=t.split(":"),r=i[0],u=i[1];n.itemSchema[r]=u}}function r(t){var i;if(!t)return null;if(i=t.dataset,i){var r=i.svptnk,u=i.svptnerinfo,f=i.svitminfp,e=i.svcptid,o=i.ufmc,s=i.sfmc,h=i.svstb,c=i.svmdcmp,l=i.svloc,a=i.svattr,v=i.persbtncls,y=i.cstmuiobj,p=n.parseJsonString(u)||{},w=n.parseJsonString(y)||{};return n.objectAssign(n.parseJsonString(f)||{},{PredefinedType:p,Key:r,ComponentId:e,UnsavedFormCode:o,SavedFormCode:s,SavedLinkSameTab:!!h,MetaLocInfo:{MetadataLocationId:l,MetadataLocationAttr:a,MetaLocCompName:c},PersButtonClassName:v,CustomUIObj:w})}}function u(){n.itemSchema=null;n.defaultItemType=null;n.partnerKey=null;n.defaultCollectionType=null;n.defOrCustCollName=null;n.collTagPath=null;n.itemTagPath=null;n.currentComponentId=null;n.sourceAttribute=null;n.apiItemType=null;n.savedFormCode=null;n.savedLinkSameTab=!1;n.urlParams=null;n.customUIObj=null;n.attachDelay=null}function t(t){if(t){u();var f=t.Mapping,e=t.SavedFormCode,o=t.SavedLinkSameTab,r=t.PredefinedType,s=r.Title,h=r.CollectionTagPath,c=r.PredefinedCollectionType,l=r.ItemType,a=r.APIItemType,v=t.Key,y=t.SourceAttr,p=t.ItemTagPath,w=t.ComponentId,b=t.CustomUIObj,k=t.AttachDelay;f&&n.iterateThroughList(f.split(","),i);l&&(n.defaultItemType=l);k&&(n.attachDelay=k);v&&(n.partnerKey=v);c&&(n.defaultCollectionType=c);s&&(n.defOrCustCollName=s);h&&(n.collTagPath=h);p&&(n.itemTagPath=p);w&&(n.currentComponentId=w);y&&(n.sourceAttribute=y);a&&(n.apiItemType=a);e&&(n.savedFormCode=e);o&&(n.savedLinkSameTab=o);n.apiItemType&&n.currentComponentId&&(n.urlParams=n.getUrlParamsForTelemetry(n.apiItemType));b&&(n.customUIObj=b)}}function f(i,u){var e,o,f,s;i&&((e=i.getAttribute(n.ComponentIdDataAttr),(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bclist)&&(o=n.ctrl.dataset.bclist.toLowerCase().split(","),(o===null||o===void 0?void 0:o.indexOf(e===null||e===void 0?void 0:e.toLowerCase()))>-1))||(e&&!n.componentMap[e]&&(f=r(i),n.componentMap[e]=f,n.partnerCount++,n.partnerCount===1&&(t(f),n.currentCompName=n.currentComponentId),n.allSourceAttributes.push(f.SourceAttr),s=f.MetaLocInfo,s&&f.PersButtonClassName&&(n.partnerWithPersBtn=f,_d.getElementsByClassName(f.PersButtonClassName).length>0&&(n.componentMap[s.MetaLocCompName]=f,sj_evt.fire(n.PartnerRegisterEN,f)))),u&&u(i)))}n.componentMap={};n.partnerCount=0;n.allSourceAttributes=[];n.setCurrentPartnerInfo=t;n.registerPartner=f}(SvCtrlV2||(SvCtrlV2={}));__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},function(n){function g(){var i={ItmId:n.currentHoveredItem.Mid,CompName:n.currentCompName};t(r,v,i)}function nt(){var i={CompName:n.currentCompName,HvrSrc:f};t(e,"",i)}function tt(n){var i={ColCount:n};t(u,l,i)}function it(n,i){var r={ExistedCount:n,NewCount:i};t(u,a,r)}function rt(r,u){var f={ColId:u,CollName:n.localCollectionsMap[u],CompName:n.currentCompName,ClkSrc:p};t(i,"",f)}function ut(){var r={CompName:n.currentCompName,ClkSrc:w};t(i,"",r)}function ft(r,u){var f={ColId:u,ColName:n.localCollectionsMap[u],CompName:n.currentCompName,ClkSrc:y};t(i,"",f)}function et(){var r={CompName:n.currentCompName,Clksrc:b};t(i,"",r)}function ot(){var r={CompName:n.currentCompName,Clksrc:f};t(i,"",r)}function st(i,u,f,e,o){var s={ColId:o,ItmId:u,CompName:n.currentCompName,ClkSrc:f,IsNewCol:e?"1":"0"};t(r,h,s)}function ht(i,u,f,e){var o={ColId:u,ItmId:f,CompName:n.currentCompName,ClkSrc:e};t(r,c,o)}function ct(i,r){var u={CompName:n.currentCompName,ErrorType:r};t(o,k,u)}function t(n,t,i){t===void 0&&(t="");i===void 0&&(i=null);var r=at(i);lt.apply(void 0,__spreadArray([n,d,t],r,!1))}function lt(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];typeof Log!="undefined"&&Log.Log&&Log.Log.apply(Log,__spreadArray([n,"",s,!1],i,!1))}function at(t){var i=[];for(var r in t)i.push(r,t[r]);return i.map(function(t){return(t===null||t===void 0?void 0:t.toString)!=null?t.toString():n.UndefinedString})}var u="Saves",e="Hover",i="SaveClick",r="Success",o="SaveErr",s="SaveControl",h="Saved",c="Unsaved",l="GetCollections",a="GetCollectionRecommendations",v="ShowFlyout",y="LnkClk",p="ColLst",w="CrtNewBtn",b="ColExp",f="SvCtrlBtn",k="UIState",d="Txt";n.logFlyoutShown=g;n.logSvBtnHoverEvent=nt;n.logGetCollectionsSucceeded=tt;n.logGetCollectionRecommendationsSucceeded=it;n.logCollLstClick=rt;n.logCreateButtonClick=ut;n.logLinkClick=ft;n.logCollExpandClick=et;n.logSaveControlBtnClick=ot;n.logAddItemSucceeded=st;n.logDeleteItemSucceeded=ht;n.logErrorState=ct}(SvCtrlV2||(SvCtrlV2={}));__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},function(n){function w(){n.removeElementClass(n.currentHoveredItem.Element,n.CurrentElementCN);n.currentHoveredItem.LatestCollId&&(sj_evt.fire(n.CurrentCollIdUnsetEN,n.currentHoveredItem.LatestCollId),n.currentHoveredItem.LatestCollId=null);n.currentHoveredItem.Element=null;n.currentHoveredItem.Turl=null;n.currentHoveredItem.Metadata=null;n.currentHoveredItem.Mid=null}function o(t,i){var r,u,f;if(!t)return null;if(r=null,i)r=t.hasAttribute(i)?t:n.getElementWithAttr(t,i);else for(u=0;u<n.allSourceAttributes.length;u++)if(r=t.hasAttribute(n.allSourceAttributes[u])?t:n.getElementWithAttr(t,n.allSourceAttributes[u]),r){i=n.allSourceAttributes[u];break}return!r||!i?null:(f=r.getAttribute(i),f)?n.parseJsonString(f):null}function wi(t){var u,i,r,f,e;if(t&&t.items){for(u=t.items,i=u.length-1;i>=0;i--)if(r=u[i],r&&r.content){if(f=r.content,!f)continue;if(e=n.getTbnlUrlFrmGetCollResp(f),e)return e}return null}}function b(n){if(n){var t=n.mid,i=n.sid;return t||i}}function pt(t){if(t){var r=t.classList.contains("saved")?!0:!1,u=r?n.svdItmLabel:n.svItmLabel,i=_qs("."+n.svCtrlFixedBtnClassName,t);i&&(i.textContent=u)}}function eu(t,r,u){var l,a,h=n.currentHoveredItem.Element,v,p,c,o,w;if(h){if(n.logSaveControlBtnClick(h),t==n.CustomCollDummyId){n.addInProgress(h);n.addToNewCollection(fr,function(t,r){sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId);i(t,r)},n.defOrCustCollName);return}if(t==n.SuggestedCollDummyId){if(v=n.currentHoveredItem.Mid,!v)return;p=((a=(l=n.dynamicSuggestedCollectionCache.get(v))===null||l===void 0?void 0:l.recommendedCollections)===null||a===void 0?void 0:a[0])||n.defOrCustCollName;n.addToNewCollection(er,function(t,r){sj_evt.fire(n.RemoveCollFromSugList,p);i(t,r)},p,n.ColListName);return}c=n.elementHasClass(h,n.SavedCN)||n.elementHasClass(n.hoverContainerSub,n.SavedCN);o=n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[n.currentHoveredItem.Mid];!c&&o&&(c=!0);w=o===null||o===void 0?void 0:o.collections[n.latestCollId];y&&e&&(w=o===null||o===void 0?void 0:o.collections[o.lastCollection]);(!f||w)&&(f||c)?(f||u)&&(n.addInProgress(h),n.removeFromCollection(ur,i,t,r)):(n.addInProgress(h),n.addToCollection(s,i,t,r))}}function ou(t){var u=t.currentTarget,r=u.getAttribute(n.CollectionIdDataAttribute),e=u.getAttribute(n.KCTDataAttr),f;if(r||e)sj_sp(t),sj_pd(t),t.stopImmediatePropagation();else return!0;if(n.logCollLstClick(n.currentHoveredItem.Element,r),r==n.CustomCollDummyId){n.addToNewCollection(fr,function(t,r){sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId);i(t,r)},n.defOrCustCollName,n.ColListName);return}if(r==n.SuggestedCollDummyId){f=u.getAttribute(n.SuggestedCollectionTitleAttribute)||n.defOrCustCollName;n.addToNewCollection(er,function(t,r){sj_evt.fire(n.RemoveCollFromSugList,f);i(t,r)},f,n.ColListName);return}u.hasAttribute(n.SavedDataAttr)?n.removeFromCollection(ur,i,r,n.ColListName):n.addToCollection(s,i,r,n.ColListName)}function bi(){t&&t.broadcastMessage(t.BCActionMessage)}function su(n,t){var i,r,u;if(!(t&&t.content&&n))return!1;i=t.content;switch(i._type){case"ImageObject":return i.imageId===n.MediaId;case"VideoObject":return i.videoId===n.MediaId;case"GenericItem":if(n.ItemTagPath!==i.itemTagPath)return!1;if("contentId"in i&&"ContentId"in n)return i.contentId===n.ContentId;if(n.ClickThroughUrl!==i.url)return!1;if("CustomData"in n&&"customData"in i)try{if(r=JSON.parse(n.CustomData),u=JSON.parse(i.customData),"MediaUrl"in r||"MediaUrl"in u)return r.MediaUrl===u.MediaUrl}catch(f){return!1}return!0}return!1}function k(t){var i,r,u;for(i in n.localSavedItemsMap)if(r=n.localSavedItemsMap[i],r.rawItem&&(u=r.rawItem,su(t,u)))return i;return null}function hu(){n.defaultCollectionType?sr(n.defaultCollectionId,n.defOrCustCollName)&&sj_evt.fire(n.RemoveCollFromList,n.defaultCollectionId):n.collTagPath&&n.defOrCustCollName&&sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId)}function di(){var u,t,i,r;if(n.defaultCollectionType)n.defaultCollectionId=Constants.PredefinedCollections[n.defaultCollectionType],n.defaultCollectionId&&!n.localCollectionsMap[n.defaultCollectionId]&&(g(n.defaultCollectionId,n.defOrCustCollName),n.latestCollId||(n.latestCollId=n.defaultCollectionId),sj_evt.fire(n.AddCollToListEN,!1,n.defaultCollectionId,n.defOrCustCollName,null,n.defaultCollectionType)),n.defaultCollectionId&&e&&(n.latestCollId=n.defaultCollectionId);else if(n.collTagPath&&n.defOrCustCollName)if(n.isCollectionExists(n.defOrCustCollName)){if(e)for(u=Object.keys(n.localCollectionsMap),t=0,i=u;t<i.length;t++)if(r=i[t],n.localCollectionsMap[r]===n.defOrCustCollName){n.latestCollId=r;break}}else n.latestCollId=n.CustomCollDummyId,sj_evt.fire(n.AddCollToListEN,!1,n.CustomCollDummyId,n.defOrCustCollName)}function cu(t,i){if(!i){var r=n.getClosest(t,".".concat(n.SaveCtrlContainerCN));r||(r=n.getClosest(_d.body,".".concat(n.SaveCtrlContainerCN)));i=r===null||r===void 0?void 0:r.getAttribute(n.ComponentIdDataAttr)}i&&n.currentCompName!=i&&n.componentMap[i]&&(hu(),n.setCurrentPartnerInfo(n.componentMap[i]),di())}function wt(t,i,r,u){var c,h,s;if(cu(t,u),!u&&!n.currentComponentId)return!1;n.addElementClass(t,n.CurrentElementCN);n.currentHoveredItem.Element=t;var e=o(t,i||n.sourceAttribute)||o(t,n.SavesGenericItemDataAttr),l=n.getElementWithAttr(t,n.AriaLabelAttr),a=l===null||l===void 0?void 0:l.ariaLabel,v=a&&a!=n.currentImgTitle&&gt;return e&&(n.currentHoveredItem.Metadata=e,n.currentHoveredItem.Mid=b(e)||k(e),n.currentHoveredItem.Turl=n.getThumnailFromItemMD(e),n.currentHoveredItem.ItemType=e.type||n.defaultItemType,h={},s=n.currentHoveredItem.Mid,s?((n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[s])?(n.currentHoveredItem.LatestCollId=n.localSavedItemsMap[s].lastCollection,n.currentHoveredItem.LatestCollId&&sj_evt.fire(n.CurrentCollIdSetEN,n.currentHoveredItem.LatestCollId),h=n.localSavedItemsMap[s].collections,(!f||((c=n.localSavedItemsMap[s])===null||c===void 0?void 0:c.collections[n.latestCollId]))&&(n.addElementClass(t,n.SavedCN),n.addElementClass(n.hoverContainerSub,n.SavedCN))):n.removeElementClass(n.hoverContainerSub,n.SavedCN),v||sj_evt.fire(n.HoverElementSetEN,h,n.latestCollId)):(n.removeElementClass(n.hoverContainerSub,n.SavedCN),n.removeElementClass(t,n.SavedCN),sj_evt.fire(n.HoverElementSetEN,h,n.latestCollId)),(v||vt)&&au(a,e,v)),n.currentUrlParams=r||n.urlParams,n.currentCompName=u||n.currentComponentId,!0}function gi(n,t){if(n){var i=parseFloat(_w===null||_w===void 0?void 0:_w.getComputedStyle(n).maxWidth);isNaN(i)||(n.style.maxWidth=i+t+"px")}}function lu(){p||(p=!0,ot.style.display="block",gi(u,-20))}function nr(){p&&(p=!1,ot.style.display="none",gi(u,20))}function au(t,i,u){var o,s,h,v,e,c,l,f,a;for(yt&&nr(),u&&sj_evt.fire(n.LoadingSuggestedCollection),n.currentImgTitle=t,o=[],s=Object.keys(n.localCollectionsMap),ni&&sj_evt.fire("mm.clarity.trigger","SaveCtrlDynSgt"),ct&&r(n.defaultCollectionId,!0,!0),h=function(t,i,u,f,e){var c,l,o,h;e===void 0&&(e=!1);l=Object.keys(n.localCollectionsMap).map(function(t){return n.localCollectionsMap[t]});i=i===null||i===void 0?void 0:i.filter(function(n){return l.indexOf(n)===-1});at&&!e&&n.dynamicSuggestedCollectionCache.set(f,{suggestedCollections:t,recommendedCollections:i});n.currentImgTitle==u&&(o=t?t[0]:null,o&&o.id&&o.title?(h=o.id,ct&&s.indexOf(h)===-1&&(h=n.defaultCollectionId),r(h,!1,!0)):yt&&((c=Object.keys(n.localCollectionsMap))===null||c===void 0?void 0:c.length)<=3&&(i===null||i===void 0?void 0:i[0])?r(n.SuggestedCollDummyId,!1,!0):r(n.noSuggestedCollId,!1,!0),n.latestCollId===n.SuggestedCollDummyId&&lu(),sj_evt.fire(n.CurrentCollIdSetEN,n.latestCollId,!1),vt&&(li?sj_evt.fire(n.HoverElementTopChoicesEN,t||[],i||[]):sj_evt.fire(n.HoverElementSuggestedCollectionEN,i||[])))},v=function(t){oi&&n.currentImgTitle!=t||sj_evt.fire(n.CurrentCollIdSetEN,n.latestCollId,!1)},e=0,c=s;e<c.length;e++)l=c[e],o.push({collectionId:l,collectionTitle:n.localCollectionsMap[l]});f=ki(i);at&&f&&n.dynamicSuggestedCollectionCache.has(f)?(a=n.dynamicSuggestedCollectionCache.get(f),h(a.suggestedCollections,a.recommendedCollections,t,f)):ci(o,t,i,function(i){var r,u,e,o;n.logGetCollectionRecommendationsSucceeded((r=i===null||i===void 0?void 0:i.RawResponse)===null||r===void 0?void 0:r.suggestedCollections.length,(u=i===null||i===void 0?void 0:i.RawResponse)===null||u===void 0?void 0:u.recommendedCollections.length);h((e=i===null||i===void 0?void 0:i.RawResponse)===null||e===void 0?void 0:e.suggestedCollections,(o=i===null||i===void 0?void 0:i.RawResponse)===null||o===void 0?void 0:o.recommendedCollections,t,f)},function(){return v(t)})}function d(t,i,r,u,f,e){if(t&&i){if(!(i in n.localSavedItemsMap)){n.elementHasClass(t,n.SavedCN)&&n.removeElementClass(t,n.SavedCN);return}n.addElementClass(t,n.SavedCN);r&&(t&&sj_evt.fire("Saved",t),n.logAddItemSucceeded(t,i,u,f,e))}}function bt(t,i,r,u,f){t&&i&&(i in n.localSavedItemsMap||n.removeElementClass(t,n.SavedCN),r&&(t&&sj_evt.fire("Unsaved",t),n.logDeleteItemSucceeded(t,f||ft,i,u)))}function tr(t,i,r,u,f){var e,o;t&&(t in n.localSavedItemsMap?(u&&n.localSavedItemsMap[t].lastCollection||(n.localSavedItemsMap[t].lastCollection=r),n.localSavedItemsMap[t].collections[r]||(n.localSavedItemsMap[t].collections[r]=!0,n.localSavedItemsMap[t].numCollections++),u?n.localSavedItemsMap[t].collectionQueue.unshift(r):n.localSavedItemsMap[t].collectionQueue.push(r)):(o={cid:i,rawItem:f?f:null,collections:(e={},e[r]=!0,e),lastCollection:r,collectionQueue:[r],numCollections:1},n.localSavedItemsMap[t]=o))}function ir(t,i){if(t&&n.localSavedItemsMap[t])if(ft=i,n.localSavedItemsMap[t].numCollections===1)delete n.localSavedItemsMap[t],n.currentHoveredItem.Mid===t&&(n.currentHoveredItem.LatestCollId=null);else{delete n.localSavedItemsMap[t].collections[i];n.localSavedItemsMap[t].numCollections--;var r=n.localSavedItemsMap[t].collectionQueue.indexOf(i);r>-1&&(n.localSavedItemsMap[t].collectionQueue.splice(r,1),n.localSavedItemsMap[t].lastCollection=n.localSavedItemsMap[t].collectionQueue.slice(-1)[0],n.currentHoveredItem.Mid===t&&(n.currentHoveredItem.LatestCollId=n.localSavedItemsMap[t].lastCollection))}}function rr(t,i,r,u){n.localCollectionsCidMap[t]||(n.localCollectionsCidMap[t]=[]);n.localCollectionsCidMap[t].indexOf(i)<=-1&&(u?n.localCollectionsCidMap[t].push(i):n.localCollectionsCidMap[t].unshift(i));n.cidToThumbnailUrlMap[i]||(n.cidToThumbnailUrlMap[i]=r)}function vu(t,i){var r,u;if(n.localCollectionsCidMap[t])return(u=n.localCollectionsCidMap[t].indexOf(i),u<=-1)?void 0:(n.localCollectionsCidMap[t].splice(u,1),((r=n.localCollectionsCidMap[t])===null||r===void 0?void 0:r[0])||null)}function yu(t,i){var r,u;return t?(r=n.parseJsonString(t.getAttribute(n.SavesGenericItemDataAttr)),r||(r=o(t,n.sourceAttribute)),!r)?null:(u={url:r.ClickThroughUrl,customData:r.CustomData,domain:r.FriendlyDomainName,itemTagPath:r.ItemTagPath,title:r.Title,_type:"GenericItem",contentId:r.ContentId},{collectionItemId:i,content:u,itemtype:"Generic"}):null}function s(t,i,u,f,e,o,s){var h,c;return(o&&o!=""||(o=(c=(h=t.targetCollectionOperationStatus)===null||h===void 0?void 0:h.collection)===null||c===void 0?void 0:c.id),!(t&&t[n.IsSuccessAttr])||!o)?!1:(sj_evt.fire(n.SaveControlA11yEN,1),r(o,!0,!0),i.LatestCollId=o,sj_evt.fire(n.CurrentCollIdSetEN,o),kf(o,f),ti&&sj_evt.fire(n.SaveButtonClickFeedPg,o,s?s:n.localCollectionsMap[o]),e&&s&&(g(o,s),sj_evt.fire(n.AddCollToListEN,!0,o,s,i.Turl,null,!0,!1,(n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset.erc)?!0:!1)),bi(),pu(i,t,u,f,o,e))}function ur(t,i,u,f,e){if(!(t&&t[n.IsSuccessAttr]))return!1;sj_evt.fire(n.SaveControlA11yEN,2);r(u);sj_evt.fire(n.CurrentCollIdUnsetEN,u);var o=n.localSavedItemsMap[i===null||i===void 0?void 0:i.Mid];return o.lastCollection==u&&ui&&iu(u),bi(),wu(i,t,f,(o===null||o===void 0?void 0:o.cid)||null,u,e)}function fr(t,i,r,u,f,e,o){return t&&t[n.IsSuccessAttr]&&sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId),s(t,i,r,u,f,e,o)}function er(t,i,r,u,f,e,o){t&&t[n.IsSuccessAttr]&&(nr(),n.dynamicSuggestedCollectionCache.clear(),sj_evt.fire(n.RemoveCollFromSugList,o));return s(t,i,r,u,f,e,o)}function pu(t,i,u,f,e,o){var v=i.targetCollectionOperationStatus,y,h,s,nt,p,w;if(!(v&&v[n.IsSuccessAttr]))return!1;try{var b=v,k=b.itemOperationStatuses,tt=n.CollectionAttr,a=b[tt];if(!(k&&a&&a.id))return!1;var it=k,g=it[0],rt=n.IsSuccessAttr,ut=g[rt],ft=n.CollectionItemIdAttr,c=g.item[ft];if(!ut)return!1;y=e in Constants.PredefinedCollections;h=y?e:a.id;r(h);y&&(n.kctColls[e]=a.id);s=t.Mid;nt=t.ItemType=="recipe"?t.Turl:null;s||c===null||(p=c.substring(c.indexOf(":")+1),s=p,n.currentHoveredItem.Element==t.Element&&(n.currentHoveredItem.Mid=p));s!=null&&n.dynamicSuggestedCollectionCache.get(s)!=null&&n.dynamicSuggestedCollectionCache["delete"](s);w=u?c:n.getValidCid(c,t.ItemType);t.Turl&&(rr(h,w,t.Turl,!1),n.localCollectionsMap[h]&&sj_evt.fire(n.ChangeCollThumbnail,h,t.Turl));var et=s?n.localSavedItemsMap[s]:!1,l=t.Element,ot=u?yu(l,c):null;return(tr(s,w,h,!1,ot),n.localSavedItemsMap[s]&&n.fireSCEngagementEvent(1,0,o?1:0,n.localSavedItemsMap[s].numCollections),l)?(d(l,s,!0,f,o,h),sj_evt.fire(n.UpdateHoverBoxEN,h,n.localCollectionsMap[h],s&&n.localSavedItemsMap[s].numCollections||1),n.isSavableEntity(l)||d(n.getElementFromMid(s),s,!1),or(n.SaveAddEN,i,s,l,!et,u,nt)):!1}catch(st){return!1}}function wu(t,i,r,u,f,e){var o=t.Mid,l=t.ItemType=="recipe"?t.Turl:null,s=t.Element,c,h;return(i.collectionId=f,ir(o,f),n.fireSCEngagementEvent(0,1,0,n.localSavedItemsMap[o]?n.localSavedItemsMap[o].numCollections:0),s)?(bt(s,o,!0,r,f),c=vu(f,u),sj_evt.fire(n.ChangeCollThumbnail,f,c?n.cidToThumbnailUrlMap[c]:null),h=!n.localSavedItemsMap[o],h&&!n.isSavableEntity(s)&&bt(n.getElementFromMid(o),o,!1),sj_evt.fire(n.UpdateHoverBoxEN,f,n.localCollectionsMap[f],h?0:n.localSavedItemsMap[o].numCollections),or(n.SaveDelEN,i,o,s,h,e,l)):!1}function or(t,i,r,u,f,e,o){if(u){if(n.removeInProgress(u),(n.currentHoveredItem===null||n.currentHoveredItem===void 0?void 0:n.currentHoveredItem.Element)===u){n.removeElementClass(n.ctrl,n.GetErrCN);switch(t){case n.SaveAddEN:n.addElementClass(n.hoverContainerSub,n.SavedCN);break;case n.SaveDelEN:f&&n.removeElementClass(n.hoverContainerSub,n.SavedCN)}n.removeInProgress(n.hoverContainerSub)}sj_evt.fire(t,i,n.localCollectionsMap[n.latestCollId],r,u,f,e&&typeof n.metaLocElement!==n.UndefinedString&&n.metaLocElement===u,o)}return ft=null,n.fixedSvCtrlBtnFdPage&&pt(u),!0}function i(t,i){t===3?(n.addElementClass(n.ctrl,n.GetErrCN),et=!1):(n.removeElementClass(i,n.InProgressCN),n.addElementClass(i,n.FlyoutErrorCN));sj_evt.fire(n.SaveControlErrorEN,t)}function g(t,i,r){r===void 0&&(r=!1);r?(n.localRecentCollectionMap[t]=i,n.localRecentCollectionNames[i]=1):(n.localCollectionsMap[t]=i,n.localCollectionNames[i]=1)}function sr(t,i){var r;return((r=n.localCollectionsCidMap[t])===null||r===void 0?void 0:r.length)>0?!1:n.localCollectionsMap[t]&&n.localCollectionNames[i]?(delete n.localCollectionsMap[t],delete n.localCollectionNames[i],!0):!1}function bu(n){if(!(n.length<=0)){var i=n.sort(function(n,t){return n.dateModified>t.dateModified?-1:1}),t=i[0];r(!t.knownCollectionType?t.id:Constants.PredefinedCollections[t.knownCollectionType],!0,!0)}}function r(t,i,r){if(i===void 0&&(i=!1),r===void 0&&(r=!1),r)n.latestCollId=t;else{var u=n.defaultCollectionId;lt&&n.defaultCustomCollectionId&&(u=n.defaultCustomCollectionId);n.latestCollId=e&&y&&u?u:t}i&&(n.noSuggestedCollId=n.latestCollId)}function ku(t,i){var e=i[0],u,f;if(t){var o=n.getItemIds(t),r=o.collectionItemId,s=o.contentId;s&&r&&(u=t.itemType==="Generic",f=u?r:n.getValidCid(r,t.itemType),t.content&&rr(e,f,n.getTbnlUrlFrmGetCollResp(t.content),!0),tr(s,f,e,!0,u?t:null))}}function hr(t,i,r){var e,s;if(r===void 0&&(r=!1),t){var f=t.collectionPage,o=t.id,u=t.knownCollectionType;(u&&(n.kctColls[Constants.PredefinedCollections[u]]=o),e=!u?o:Constants.PredefinedCollections[u],i[e]||yf(t,!1,i,r),f&&f.items)&&(s=f.items,n.iterateThroughList(s,ku,e))}}function du(t){hr(t,n.localCollectionsMap)}function gu(t){hr(t,n.localRecentCollectionMap,!0)}function nf(t){var r,i,u,f;return(t&&t.collections)?(i=t.collections,((r=n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset)===null||r===void 0?void 0:r.erc)?i.length>1?(u=__spreadArray([],i,!0).sort(function(n,t){return n.dateModified>t.dateModified?-1:1}).slice(0,2),n.iterateThroughList(u,gu)):(n.collectionListContainer===null||n.collectionListContainer===void 0?void 0:n.collectionListContainer.removeChild(n.recentCollectionList),n.recentCollectionList=null):i=i.reverse(),f=(i===null||i===void 0?void 0:i.length)||0,n.logGetCollectionsSucceeded(f),n.iterateThroughList(i,du),bu(i),di(),df(i),sj_evt.fire("onSaveGet",t,n.localCollectionsMap[n.latestCollId]),n.partnerWithPersBtn&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn),!0):!1}function tf(n){ei=new Date;st===!1&&(st=!0,setTimeout(function(){return cr(n)},ht))}function cr(t){var u=new Date,i,r;u.getTime()-ei.getTime()<ht?setTimeout(function(){return cr(t)},ht):(st=!1,i=null,(n.partnerWithPersBtn===null||n.partnerWithPersBtn===void 0?void 0:n.partnerWithPersBtn.PersButtonClassName)&&(i=_qs("."+n.partnerWithPersBtn.PersButtonClassName,_d.body)),(t===null||t===void 0?void 0:t.type)==="resize"&&i&&n.elementHasClass(n.hoverContainerSub,n.PersBtnHoveredCN)?(r=n.getClientRect(i),n.setHoverContainerStyle({top:r.top+n.PixelUnit,left:r.left+n.PixelUnit})):n.positionHoverContainer())}function nt(t){if(!n.getKeepFlyoutActive()&&(t=t?t:lr(null),t)){if(n.currentHoveredItem.Element!==t&&n.hideHoverContainer(),w(),!wt(t)){w();return}n.hoverContainer&&(n.positionHoverContainer(),n.showHoverContainer(),n.removeElementClass(n.hoverContainerSub,n.PersBtnHoveredCN),n.iterateThroughList(n.RemovableCN,function(t){var i=n.currentHoveredItem.Element;i&&n.hoverContainerSub&&(n.elementHasClass(i,t)?n.addElementClass(n.hoverContainerSub,t):n.removeElementClass(n.hoverContainerSub,t))}));sj_evt.fire(n.ControlAppendedEN)}}function rf(t){var i,r;if(!n.getKeepFlyoutActive()&&!n.isMobileView&&n.isBicChat=="0"&&(i=t[n.RelatedTargetAttr],i||(r=t.srcElement,r&&(r==_ge("svctrlinlineformback")||r==n.ctrlBtn)||n.hideHoverContainer()),i&&n.hoverContainer)){if(n.elementContains(n.ctrl,i)||n.elementContains(n.currentFocusTarget,i))return;n.isElementInSpaceOfAnother(i,n.hoverContainer)||n.hideHoverContainer()}}function uf(t){var r,u=n.getCurrentHoveredItem(t.target),i;if(u){if(i=((r=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||r===void 0?void 0:r.svicnclkb)||"Open",nt(u),i==="OpenSave"||i==="OpenSaveRemove")n.onSaveControlClicked(i==="OpenSave"?!1:!0);sj_evt.fire(n.SaveButtonClickEN)}}function lr(t){rt&&sb_ct(rt);var i=l;return l=t,t&&(rt=sb_st(nt,n.attachDelay*2)),i}function ff(n){var t=l;return l=n,n&&nt(),t}function ar(t){if(!n.getKeepFlyoutActive()&&!n.isMobileView){n.shouldShowFlyout=!0;var i=t[n.CurrentTargetAttr];n.currentFocusTarget=t.target;i&&n.isSavableEntity(i)?t.type==="mouseenter"&&_w.innerHeight-t.clientY<48?sj_pd(t):ai?ff(i):lr(i):sj_pd(t)}}function vr(t){var i,r,u,f,e;if(!n.getKeepFlyoutActive()&&!n.isMobileView){if(i=t[n.CurrentTargetAttr],r=t[n.RelatedTargetAttr],!r){if(u=t[n.TargetAttr],t.type!=="mouseleave"&&n.elementContains(i,u))return;n.hideHoverContainer();return}if(!n.elementContains(n.ctrl,r)&&n.isSavableEntity(i)&&!n.elementContains(i,r)){if(f=n.getCurrentHoveredItem(r),e=n.isSavableEntity(f),t.type==="focusout"&&!n.elementContains(i,r)&&!n.shiftKeyDown&&n.tabKeyDown&&e){n.nextFocusable=r;n.ctrlBtn.focus();sj_evt.fire(n.SaveButtonFocusEN);n.tabKeyDown=!1;return}n.hoverContainer&&n.hideHoverContainer();n.iterateThroughList(n.RemovableCN,function(t){n.removeElementClass(n.hoverContainerSub,t)});n.iterateThroughList([n.HoverCN,n.FocusCN,n.SaveCtrlHoveredCN,n.CurrentElementCN],function(t){n.removeElementClass(i,t)});n.currentHoveredItem.Element===i&&(w(),n.currentFocusTarget==null)}}}function yr(t){var i,r;t&&(((i=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||i===void 0?void 0:i.scperbtn)?(r=!!_qs(".scpersicn",t),r||ef(t)):(n.addInListeners(t,ar),n.addOutListeners(t,vr)),kt(t))}function ef(t){var u=n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset,i=sj_ce("div",null,"scpersicn"),r,f,e;i.setAttribute("tabIndex","0");r=sj_ce("div",null,"scperslbl");f=sj_ce("span",null,"scicn onusvd");f.innerText=(u===null||u===void 0?void 0:u.svt)||"Save";e=sj_ce("span",null,"scicn onsvd");e.innerText=(u===null||u===void 0?void 0:u.svdt)||"Saved";r.appendChild(f);r.appendChild(e);t.appendChild(i);t.appendChild(r);n.addInListeners(i,function(){r===null||r===void 0?void 0:r.classList.add("b_sld");i===null||i===void 0?void 0:i.classList.add("b_actv")});n.addOutListeners(i,function(){r===null||r===void 0?void 0:r.classList.remove("b_sld");i===null||i===void 0?void 0:i.classList.remove("b_actv")});n.addClickListener(i,function(t){r===null||r===void 0?void 0:r.classList.add(n.LabelSlideCN);i===null||i===void 0?void 0:i.classList.add("b_scactv");pr(t)},!0);n.addClickListener(r,function(t){r===null||r===void 0?void 0:r.classList.add(n.LabelSlideCN);i===null||i===void 0?void 0:i.classList.add("b_scactv");pr(t)},!0);n.addElementClass(n.ctrlBtn,"b_schide")}function pr(t){var i,r,u,f,e,o;t[n.TargetAttr]&&(e=n.getCurrentHoveredItem(t[n.TargetAttr]),e)&&(n.flyoutDisplaying&&(o=n.isSavableEntity(t[n.TargetAttr].offsetParent)?t[n.TargetAttr].offsetParent:t[n.TargetAttr].parentNode,n.currentHoveredItem.Element&&o!=n.currentHoveredItem.Element&&((r=(i=_qs(".scperslbl",n.currentHoveredItem.Element))===null||i===void 0?void 0:i.classList)===null||r===void 0?void 0:r.remove("b_sld"),(f=(u=_qs(".scpersicn",n.currentHoveredItem.Element))===null||u===void 0?void 0:u.classList)===null||f===void 0?void 0:f.remove("b_actv"),n.hideHoverContainer())),nt(e),n.handleButtonClick(t))}function sf(t){if(t){var i=_qs("."+n.svCtrlFixedBtnClassName,t);i&&(n.addClickListener(i,uf,!0),n.fixedSvCtrlBtnFdPage&&(pt(t),n.isSvCtrlOnHoverDisabled||n.addInListeners(i,n.handleButtonHoverIn),n.addInListeners(t,ar),n.addOutListeners(t,vr)));kt(t)}}function tt(t){t&&(Number(n.isBicChat)>1||n.fixedSvCtrlBtnFdPage?n.iterateThroughList(n.selectChildrenOfClass(t,n.SavableEntityCN),sf):n.isSavableEntity(t)?yr(t):n.iterateThroughList(n.selectChildrenOfClass(t,n.SavableEntityCN),yr))}function kt(n){if(n){var t=o(n);t&&d(n,b(t)||k(t))}}function hf(t){var i=t;i&&(i.type==="attributes"&&i.target&&n.iterateThroughList(n.selectChildrenOfClass(i.target,n.SavableEntityCN),function(n){tt(n);kt(n)}),n.ctrl&&i.addedNodes&&i.addedNodes.length>0&&n.iterateThroughList(i.addedNodes,tt))}function cf(t){for(var i=t,u={scroll:1,overlay:1,auto:1},r;i&&i.parentElement&&i!==(_d===null||_d===void 0?void 0:_d.body);){if(i.hasAttribute(n.ScrollBindDataAttr))break;r=_w===null||_w===void 0?void 0:_w.getComputedStyle(i);(r.overflow in u||r.overflowX in u||r.overflowY in u)&&(n.addListenerToElement(i,"scroll",function(){n.positionHoverContainer()}),i.setAttribute(n.ScrollBindDataAttr,"1"));i=i.parentElement}}function it(t){n.registerPartner(t,lf);(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.cstmui)&&wf();cf(t)}function lf(t){n.partnerCount!==1||et?(c.observe(t,n.observerConfig),n.ctrl&&tt(t)):(n.containerElement=t,n.getCollections(function(n){return af(n,t)},function(){return i(3,null)}),et=!0)}function af(t,i){var r=nf(t);return h&&(wt(h),h=null),sj_evt.fire(n.CollectionsGottenEN),c.observe(i,n.observerConfig),n.ctrl&&tt(i),r}function wr(t){var r,i,u,f;if(t&&(n.elementHasClass(t,n.SaveCtrlContainerCN)&&t.dataset.svcptid?it(t):n.partnerWithPersBtn&&n.elementHasClass(t,n.partnerWithPersBtn.PersButtonClassName)&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn),r=t.children,r))for(i=0,u=r;i<u.length;i++)f=u[i],wr(f)}function vf(t){var i=t;i&&(i.addedNodes&&i.addedNodes.length>0&&n.iterateThroughList(i.addedNodes,wr),i.removedNodes&&i.removedNodes.length>0&&n.iterateThroughList(i.removedNodes,function(t){n.partnerWithPersBtn&&n.elementHasClass(t,n.partnerWithPersBtn.PersButtonClassName)&&sj_evt.fire(n.DeregisterPersBtnEN)}),i.attributeName&&i.target&&n.partnerWithPersBtn&&i.attributeName===n.partnerWithPersBtn.MetaLocInfo.MetadataLocationAttr&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn))}function br(t){return new MutationObserver(function(i){return n.iterateThroughList(i,t)})}function kr(t){var i=t[1],r=t[2],f,u;i&&r&&(f=r&&n.getValidCid(r,n.defaultItemType),f)&&(u=n.getElementFromMid(i),u&&d(u,i,!1))}function dr(t){var i=t[1],u=t[2],r;i&&(r=n.getElementFromMid(i),ir(i,u),r&&bt(r,i,!1))}function yf(t,i,r,u){var o,f;i===void 0&&(i=!1);u===void 0&&(u=!1);var l=t.id,s=t.title,h=t.collectionPage,c=t.knownCollectionType,e=c?Constants.PredefinedCollections[c]:l;!r[e]&&s&&(g(e,s,u),f=null,h&&((o=h.items)===null||o===void 0?void 0:o.length)&&(f=wi(h),f&&sj_evt.fire(n.ChangeCollThumbnail,e,f)),sj_evt.fire(n.AddCollToListEN,i,e,s,f,c||null,!1,u))}function gr(){(n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset.ebc)&&typeof CollChannel.CollectionsBroadcastChannel!==n.UndefinedString&&(t=new CollChannel.CollectionsBroadcastChannel(bf,null,null,!1),t===null||t===void 0?void 0:t.initialize())}function nu(t){var i=t[1],r=t[2],u=t[3],f=t[4],e=t[5];wt(r,u,f,e);n.positionHoverContainer(i);n.showHoverContainer();n.addElementClass(n.hoverContainerSub,n.PersBtnHoveredCN);sj_evt.fire(n.ControlAppendedEN)}function pf(){var t=_d.querySelector(":root"),i,r;t&&(t.style.setProperty(n.IcnsBGColorCss,n.SavePromClrCss),t.style.setProperty(n.IcnLblTxtClrCss,n.SavePromTxtClrCss),i=getComputedStyle(t).getPropertyValue(n.SavedPromIcnCss),t.style.setProperty(n.SavedIcnCss,i),r=getComputedStyle(t).getPropertyValue(n.UnsavedPromIcnCss),t.style.setProperty(n.UnsavedIcnCss,r))}function wf(){n.customUIObj&&n.flyoutContainer&&(n.customUIObj.BGColor&&n.flyoutContainer.style.setProperty(n.FlyoutBGClrCss,n.customUIObj.BGColor),n.customUIObj.TextColor&&n.flyoutContainer.style.setProperty(n.FlyoutTxtClrCss,n.customUIObj.TextColor),n.customUIObj.LinkColor&&n.flyoutContainer.style.setProperty(n.FlyoutLnkClrCss,n.customUIObj.LinkColor))}function bf(){return}function tu(t){var i=t[1];n.iterateThroughList(v,it);h=i}function kf(t,i){var r=a?sj_cook.get(n.PaneCookieName):null,u=i=="Btn"&&(fi||a&&!r);(ri||u)&&iu(t);a&&!r&&sj_cook.set(n.PaneCookieName,n.TS,Date.now().toString(),!0,"/")}function iu(t){n.openCollectionsPane(ii+"&collId="+t)}function ru(){n.iterateThroughList(v,it);n.partnerWithPersBtn&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn)}function df(t){var i,u;t===void 0&&(t=null);lt&&t&&(u=(i=fu.qsv("collid"))!==null&&i!==void 0?i:"",t.find(function(n){return n.id===u})&&(n.defaultCustomCollectionId=u,r(n.defaultCustomCollectionId,!0,!0)))}function uu(){sj_evt.unbind(n.FavAddEN,kr);sj_evt.unbind(n.FavDeleteEN,dr);sj_evt.unbind("ajax.unload",uu);sj_evt.unbind(n.PersButtonInteractEN,nu);sj_evt.unbind(n.CollBCLoadedEN,gr);sj_evt.unbind(n.CurrentElementSetEN,tu);sj_evt.unbind(n.UpdateSaveStateEN,ru);_d.body.removeChild(n.hoverContainer);ut.disconnect();c.disconnect();t===null||t===void 0?void 0:t.close()}function gf(){sj_evt.bind(n.FavDeleteEN,dr);sj_evt.bind(n.FavAddEN,kr);sj_evt.bind(n.PersButtonInteractEN,nu);sj_evt.bind("ajax.unload",uu);sj_evt.bind(n.CurrentElementSetEN,tu,!0);sj_evt.bind(n.UpdateSaveStateEN,ru,!0);sj_evt.bind(n.CollBCLoadedEN,gr,!0)}function ne(){n.localSavedItemsMap={};n.localCollectionsMap={};n.localRecentCollectionMap={};n.localCollectionsCidMap={};n.localRecentCollectionsCidMap={};n.cidToThumbnailUrlMap={};n.localCollectionNames={};n.localRecentCollectionNames={};n.latestCollId=null;n.shouldShowFlyout=!0;n.partners=[];n.currentHoveredItem={Element:null,LatestCollId:null,Metadata:null,Mid:null,Turl:null}}function te(){n.ctrl=_ge("svctrl");n.flyoutContainer=_ge("svflytc");var t=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset,i=n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset;n.isMobileView=!!(i===null||i===void 0?void 0:i.scmobv);n.isBicChat=i===null||i===void 0?void 0:i.scbiccht;n.svCtrlFixedBtnClassName=i===null||i===void 0?void 0:i.scfxdbtn;n.fixedSvCtrlBtnFdPage=!!(i===null||i===void 0?void 0:i.scfdimgfxdbtn);n.isSvCtrlOnHoverDisabled=!!(i===null||i===void 0?void 0:i.scdissh);n.svdItmLabel=i===null||i===void 0?void 0:i.svdststr;n.svItmLabel=i===null||i===void 0?void 0:i.svststr;ii=i===null||i===void 0?void 0:i.ocltgt;ri=i===null||i===void 0?void 0:i.seopoa;ui=i===null||i===void 0?void 0:i.seopod;fi=i===null||i===void 0?void 0:i.seopbs;a=i===null||i===void 0?void 0:i.seopfbs;vi=i===null||i===void 0?void 0:i.scctcls;pi=!!(i===null||i===void 0?void 0:i.scmbbi);gt=t===null||t===void 0?void 0:t.svctrlv3dynsug;ni=t===null||t===void 0?void 0:t.svctrlsgcl;n.persBtnSavedCN=t===null||t===void 0?void 0:t.pbscn;ti=!!(t===null||t===void 0?void 0:t.svctrlfdtst);e=!!(t===null||t===void 0?void 0:t.pdc);ct=!!(t===null||t===void 0?void 0:t.edcadf);y=!!(t===null||t===void 0?void 0:t.disdycolname);oi=!!(t===null||t===void 0?void 0:t.scfsnm);lt=!!(t===null||t===void 0?void 0:t.ecdc);si=!!(t===null||t===void 0?void 0:t.scedscc);at=!!(t===null||t===void 0?void 0:t.scecsccr);hi=+((t===null||t===void 0?void 0:t.scdscd)||100);vt=!!(t===null||t===void 0?void 0:t.svctrlv2sug);li=!!(t===null||t===void 0?void 0:t.svctrltc);ai=!!(t===null||t===void 0?void 0:t.scfhscp);yt=!!(t===null||t===void 0?void 0:t.sc3ercs);yi=!!(t===null||t===void 0?void 0:t.isprom);f=(t===null||t===void 0?void 0:t.svctrlv3)||"";ci=si?n.debounceWithLeading(n.getSuggestedTitles,hi):n.getSuggestedTitles}function ie(){te();n.ctrl&&(n.setKeepFlyoutActive(!1),n.addListenerToElement(n.ctrl,"mousedown",sj_sp));n.ctrlBtn=_ge("svctrlbtn");n.hoverContainer=_ge("svhvr");n.hoverContainerSub=_ge("svhvrsub");u=_ge("sccolltxt");ot=_ge("sccollinicon");n.hoverContainer&&(_d.body.insertBefore(n.hoverContainer,_d.body.firstChild),n.addOutListeners(n.hoverContainer,rf));ne();c=br(hf);ut=br(vf);ut.observe(_d.body,n.observerConfig);n.flyoutContainer&&n.flyoutContainer.hasAttribute("data-svlne")&&(n.standalone=!!n.flyoutContainer.getAttribute("data-svlne"));v=n.selectChildrenOfClass(_d.body,n.SaveCtrlContainerCN);n.standalone||n.iterateThroughList(v,it);gf();n.addListenerToElement(_w,n.ScrollEvent,function(){vi=="0"&&n.positionHoverContainer()});n.addListenerToElement(_w,n.ResizeEvent,tf);dt=n.debounce(function(){n.tabKeyDown=!1},1e3);_w.addEventListener("keydown",function(t){!n.shiftKeyDown&&t.shiftKey?n.shiftKeyDown=!0:n.tabKeyDown||t.key!="Tab"||(n.tabKeyDown=!0)});_w.addEventListener("keyup",function(t){!t.shiftKey&&n.shiftKeyDown?n.shiftKeyDown=!1:n.tabKeyDown&&t.key=="Tab"&&dt()});yi&&pf();n.isMobileView&&pi&&_w.addEventListener("popstate",function(){n.mobileHistoryUpdated&&(n.mobileHistoryUpdated=!1,n.hideHoverContainer())});y&&n.flyoutContainer&&(n.defaultCollectionName=u===null||u===void 0?void 0:u.innerText)}var ki;n.containerElement=null;n.shiftKeyDown=!1;n.tabKeyDown=!1;n.kctColls={};n.isBicChat=null;n.svCtrlFixedBtnClassName=null;n.defaultCollectionId="";n.defaultCustomCollectionId="";n.dynamicSuggestedCollectionCache=new Map;n.fixedSvCtrlBtnFdPage=!1;n.isSvCtrlOnHoverDisabled=!1;n.svItmLabel=null;n.svdItmLabel=null;var h=null,rt,ut,c,ft,l,t,et=!1,dt=null,f=null,gt=null,ni=null,ti=!1,ii=null,ri=null,ui=null,fi=null,a=null,v,ot,u,ei,st=!1,ht=500,y=!1,ct=!1,e=!1,oi=!1,lt=!1,fu=typeof pMMUtils!="undefined"?pMMUtils:null,si=!1,at=!1,hi=100,ci,vt=!1,li=!1,ai=!1,yt=!1,p=!1,vi=null,yi=!1,pi=!1;n.clearCurrentHoveredItem=w;n.metadataFromElement=o;n.getThumbnailUrlFromCollectionPage=wi;n.getMetadataId=b;n.updateSvCtrlBtnContentForHostPage=pt;n.handleSaveClick=eu;n.collectionPickerItemListener=ou;n.findMatchingGenericItemId=k;ki=function(n){return b(n)||k(n)};n.addItemSuccessCB=s;n.handleError=i;n.addCollectionName=g;n.removeCollectionName=sr;ie()}(SvCtrlV2||(SvCtrlV2={})),function(n){function ir(t){var e,o,f;if(i){t||(t=n.currentHoveredItem.Mid);var u=t&&n.localSavedItemsMap[t],r=u?u.lastCollection:n.latestCollId,s=r&&n.localCollectionsMap[r]||n.defOrCustCollName;ui&&n.defaultCollectionName&&r==n.defaultCollectionId&&(s=n.defaultCollectionName);r===n.SuggestedCollDummyId&&(f=t?(o=(e=n.dynamicSuggestedCollectionCache===null||n.dynamicSuggestedCollectionCache===void 0?void 0:n.dynamicSuggestedCollectionCache.get(t))===null||e===void 0?void 0:e.recommendedCollections)!==null&&o!==void 0?o:[]:[],s=f===null||f===void 0?void 0:f[0]);oi(r,s,u?u.numCollections:0)}}function br(t){sj_sp(t);var i=t.target.value.trim(),r=n.isCollectionExists(i);g.setAttribute("aria-disabled",i&&!r?"false":"true");r?(n.addElementClass(a,n.ErrDispCN),sj_evt.fire(n.SaveControlA11yEN,3)):n.elementHasClass(a,n.ErrDispCN)&&n.removeElementClass(a,n.ErrDispCN)}function rr(t){var f,e,o,i=t[1],r=n.currentHoveredItem.Mid,s=n.localCollectionsMap[i],u;i==n.defaultCollectionId&&n.defaultCollectionName&&(s=n.defaultCollectionName);i===n.SuggestedCollDummyId&&(u=r?(e=(f=n.dynamicSuggestedCollectionCache===null||n.dynamicSuggestedCollectionCache===void 0?void 0:n.dynamicSuggestedCollectionCache.get(r))===null||f===void 0?void 0:f.recommendedCollections)!==null&&e!==void 0?e:[]:[],s=u===null||u===void 0?void 0:u[0]);oi(i,s,r&&((o=n.localSavedItemsMap[r])===null||o===void 0?void 0:o.numCollections));ni=!1}function kr(t){var i=t[1],r;i==5?(n.removeElementClass(ht,n.ErrStateInvisibleCN),n.addElementClass(ht,n.ErrStateVisibleCN)):rt&&(s.textContent=rt[i],n.removeElementClass(s,n.ErrStateInvisibleCN),n.addElementClass(s,n.ErrStateVisibleCN));n.logErrorState(n.currentHoveredItem.Element,n.UiErrorStates[i]);r=n.currentHoveredItem.Mid;n.fireSCEngagementEvent(0,0,0,r&&n.localSavedItemsMap[r]?n.localSavedItemsMap[r].numCollections:0,n.UiErrorStates[i]);i!=3&&d(l)}function dr(n){var i=n[1],t=_ge("scacc");gt&&t&&(t.textContent="",setTimeout(function(){t.textContent=gt[i]},1e3))}function gr(t){var i,u,h=t[0],f=t[1],e=t[2],o=t[3],s=n.currentHoveredItem.Mid;o!==0&&(!r||((i=n.localSavedItemsMap[s])===null||i===void 0?void 0:i.collections[n.latestCollId]))?(!r||r&&((u=n.localSavedItemsMap[s])===null||u===void 0?void 0:u.collections[n.latestCollId]))&&n.addElementClass(n.hoverContainerSub,n.SavedCN):n.removeElementClass(n.hoverContainerSub,n.SavedCN);f==n.defaultCollectionId&&n.defaultCollectionName&&(e=n.defaultCollectionName);oi(f,e,o)}function nu(){o=_ge("svctrlinlineform");st=_ge("svctrlnewint");g=_ge("svctrlinlineformcreate");v=_ge("svctrlhvr");t||(t=_ge("svflytc"));i=_ge("svctrllnk");tt=_ge("sccolltxt");vi=i===null||i===void 0?void 0:i.getAttribute("href");wt=_ge("svctrlhvrnum");l=_ge("svctrlerr");s=_ge("svctrlerrtxt");u=_ge("svctrlhvrbtn");e=_ge("svctrllstw");y=_ge("svctrlhvrpnl");ht=_ge("svctrlmsmtcherrtxt");nt=_ge("svctrlmsmtchlnk");ct=_ge("svctrlhvrpnlbtn");a=_ge("svctrlinlineformerrdup");lt=_ge("svctrlinlineformback");yi=_ge("svctrlmobhdr");bt=_ge("svctrlhvrntch");kt=_ge("svctrlhvrpnlcls");it=_ge("svctrlmobbg");at=_ge("svctrlsuglst");vt=_ge("svctrltoplst");yt=_ge("svctrlsugtitle");pt=_ge("svctrltoptitle")}function tu(){var e;if(n.ctrl&&(e=n.ctrl.dataset,e)){var d=e.dly,c=e.sfmc,tt=e.svctrlv2sug,l=e.svctrlv3,a=e.svctrlv3dynsug,y=e.disdycolname,it=e.pdc,et=e.scetuo;dt=+d||0;!n.savedFormCode&&c&&(n.savedFormCode=c);r=l?l:null;pi=!!tt;ui=y?y:null;di=!!it;wi=a?a:null;gi=!et?". . .":"..."}if(nu(),t&&t.dataset){var s=t.dataset,p=s.htc,b=s.ocltgt,ot=s.scmbbi,st=s.scbhvr,ht=s.scctcls,ct=s.scbsld,at=s.scmaint,vt=s.elfo,yt=s.scfypf,pt=s.sc3nfoo;ut=p?p:null;ft=b?b:null;ti=!!ot;bi=!!st;ri=ht!="0";ii=!!ct;ki=!!at;w=!!vt;nr=!!yt;tr=!!pt}o&&(f=_ge("svctrlinlineformname"),n.addClickListener(lt,function(){fr();u.focus()}),n.addClickListener(g,sr),f&&(n.addEnterKeyListener(f,sr),n.addListenerToElement(f,"keyup",br)));i&&n.isAnchorElement(i)&&n.addClickListener(i,wr,!1,!1);nt&&n.isAnchorElement(nt)&&n.addClickListener(nt,wr,!1,!1);t&&(r||n.standalone||n.addOutListeners(t,hu),!r&&bi&&(n.addInListeners(n.ctrlBtn,hi),n.addOutListeners(n.ctrlBtn,wu)),(pi||r)&&(n.addInListeners(n.hoverContainer,hi),n.addOutListeners(n.hoverContainer,si)),ii&&(n.addInListeners(n.ctrlBtn,function(){n.addRemoveSlideLableClass(!0);sj_evt.fire("onSaveHover")}),n.addOutListeners(n.ctrlBtn,function(){n.flyoutDisplaying||n.addRemoveSlideLableClass(!1)})),v&&n.addClickListener(u,su),n.addClickListener(_ge("svctrltri"),bu,!1),t.hasAttribute(n.SaveErrorMapAttr)&&(rt=n.parseJsonString(t.getAttribute(n.SaveErrorMapAttr))),t.hasAttribute(n.SaveA11yMapAttr)&&(gt=n.parseJsonString(t.getAttribute(n.SaveA11yMapAttr))));ri&&(_w===null||_w===void 0?void 0:_w.addEventListener("click",function(t){var i=t[n.TargetAttr];n.flyoutDisplaying&&!n.elementContains(n.ctrl,i)&&n.hideHoverContainer()}));n.addListenerToElement(_w,"keydown",function(t){(t===null||t===void 0?void 0:t.keyCode)==27&&n.flyoutDisplaying&&n.hideHoverContainer()});kt&&n.addClickListener(kt,function(){if(n.standalone){sj_evt.fire("onCloseBtnClickRequest");return}n.hideHoverContainer()});(n.isMobileView||n.isBicChat!="0")&&!n.standalone&&iu();sj_evt.bind(n.ControlAppendedEN,gu);sj_evt.bind(n.SaveAddEN,fu);sj_evt.bind(n.SaveDelEN,eu);sj_evt.bind(n.HoverContainerHideEN,k);sj_evt.bind(n.CurrentCollIdSetEN,rr);sj_evt.bind(n.UpdateHoverBoxEN,gr);sj_evt.bind(n.SaveButtonClickEN,h);sj_evt.bind(n.LoadingSuggestedCollection,nf);sj_evt.bind(n.CollListExpandEN,cr);sj_evt.bind(n.SaveControlErrorEN,kr);sj_evt.bind(n.SaveControlA11yEN,dr);n.standalone&&(sj_evt.bind(n.CollectionsGottenEN,uu),sj_evt.bind(n.HostSavesControlClickedEN,ru));sj_evt.bind(n.SaveButtonFocusEN,ou)}function iu(){if(it&&n.addClickListener(it,n.hideHoverContainer),n.isBicChat=="0"){var i=n.SwipeBehavior[+t.dataset.scmobfb||0],r=[yi,y,it,e,u],f=n.debounce(function(r,u){var f,o;if(u===void 0&&(u=!1),r){var h=85,s=60,l=r*100/_w.innerHeight,c=e.style.getPropertyValue(n.MaxHeightAttr)||"".concat(s,"vh");if(c=c.slice(0,c.length-2),f=+c,o=u?f-l:f+l>h?h:f+l,i&&i!="NoBehavior")i=="SwipeToClose"?o=u?0:h:i=="SwipeToCloseFixedSize"&&(s=40,u?o=f>s?s:0:f==s&&(o=h));else return;if(u&&o<12){n.addElementClass(t,n.MobFlyoutCloseCN);n.removeElementClass(t,n.MobFlyoutShowCN);setTimeout(k,500);return}e.style.setProperty(n.MaxHeightAttr,"".concat(o,"vh"))}},50);n.addListenerToElements(r,"touchstart",function(n){fi=n.touches[0].clientY});n.addListenerToElements(r,"touchmove",function(t){ei=t.touches[0].clientY;var i=fi-ei;if(t[n.CurrentTargetAttr]==e){i<0&&e.scrollTop==0&&(f(Math.abs(i),!0),t.preventDefault());return}i<0?f(Math.abs(i),!0):f(Math.abs(i));t.preventDefault()});n.addListenerToElements(r,"touchend",function(){fi=null;ei=null})}}function ru(t){var i=t[0],r=t[1];i==n.HostSavesControlClickedEN&&(h(),li(r))}function uu(t){var i=t[0];i==n.CollectionsGottenEN&&c!=l&&(rr([null,n.currentHoveredItem.LatestCollId||n.latestCollId]),d(v),n.removeInProgress(),yr())}function ur(t){var i;ir(t);(!r||n.isCreateDialogShowing)&&h();or((i=n.localSavedItemsMap[t])===null||i===void 0?void 0:i.numCollections)}function fu(t){var i,u=t[4];n.currentHoveredItem.Element===u&&(ur(n.currentHoveredItem.Mid),(!r||((i=n.localSavedItemsMap[n.currentHoveredItem.Mid])===null||i===void 0?void 0:i.collections[n.latestCollId]))&&n.addElementClass(n.hoverContainerSub,n.SavedCN))}function eu(t){var i=t[4],r=t[5];n.currentHoveredItem.Element===i&&(ur(n.currentHoveredItem.Mid),r&&n.removeElementClass(n.hoverContainerSub,n.SavedCN))}function ou(){t&&h()}function fr(){u&&o&&(n.removeElementClass(y,n.DeactivateCN),n.removeElementClass(e,n.DeactivateCN),n.removeElementClass(u,n.DeactivateCN),n.removeElementClass(bt,n.DeactivateCN),n.addElementClass(u,n.FlyoutActiveCN),n.removeElementClass(o,n.FlyoutActiveCN),n.addElementClass(o,n.DeactivateCN),ri||n.setKeepFlyoutActive(!1),f.value="",f.disabled=!0,er("0"),n.isCreateDialogShowing=!1)}function su(){u&&o&&(n.addElementClass(y,n.DeactivateCN),n.addElementClass(e,n.DeactivateCN),n.addElementClass(u,n.DeactivateCN),n.addElementClass(bt,n.DeactivateCN),n.removeElementClass(o,n.DeactivateCN),n.addElementClass(o,n.FlyoutActiveCN),n.removeElementClass(u,n.FlyoutActiveCN),n.setKeepFlyoutActive(!0),f.value="",f.disabled=!1,f.focus(),n.removeElementClass(a,n.ErrDispCN),g.setAttribute("aria-disabled","true"),er("-1"),n.isCreateDialogShowing=!0)}function er(t){u.setAttribute(n.TabindexAttr,t);i===null||i===void 0?void 0:i.setAttribute(n.TabindexAttr,t);ct&&ct.setAttribute(n.TabindexAttr,t);n.collectionList&&n.collectionList.setAttribute(n.TabindexAttr,t);n.recentCollectionList&&n.recentCollectionList.setAttribute(n.TabindexAttr,t)}function or(t){if(wt&&!n.isMobileView&&t&&n.isBicChat=="0"){var i=t-1;r||(wt.textContent=i>0?"+"+i:"")}}function oi(t,u,f){if(ut&&i?(i.textContent=ut,ot=""):i&&(i.textContent=u,ot=t),r&&tt&&(!ni||!wi)&&(tt.textContent=u),n.isAnchorElement(i)){var e=vi;n.savedFormCode&&(e+="&FORM="+n.savedFormCode);ut||(e+="&collId="+t);i===null||i===void 0?void 0:i.setAttribute("href",e);n.savedLinkSameTab&&(i===null||i===void 0?void 0:i.hasAttribute(n.TargetAttr))?i.removeAttribute(n.TargetAttr):i===null||i===void 0?void 0:i.setAttribute(n.TargetAttr,"_blank");or(f)}}function sr(){var i,t;if(n.logCreateButtonClick(n.currentHoveredItem.Element),t=(i=f.value)===null||i===void 0?void 0:i.trim(),t){if(n.isCollectionExists(t)){n.addElementClass(a,n.ErrDispCN);return}d(st);n.addToNewCollection(n.addItemSuccessCB,n.handleError,t)}}function hr(t){n.nextFocusable.focus();n.nextFocusable=null;sj_pd(t)}function hu(i){var r,u;if(!n.getKeepFlyoutActive()){if(r=i[n.RelatedTargetAttr],i.type==="focusout"&&!n.elementContains(t,r)&&n.nextFocusable){u=+n.ctrl.dataset.nfdly||0;u>0?sb_st(function(){return hr(i)},u):hr(i);return}if(r){if(n.isElementInSpaceOfAnother(t,r))return;if(n.elementContains(n.ctrl,r))return;if(n.isElementInSpaceOfAnother(n.ctrl,r))return}i[n.TargetAttr]!==lt&&(i.type==="mouseleave"&&n.isBicChat!="0"||k())}}function si(){p&&(sb_ct(p),p=null)}function cr(){var r,i,u;if(t&&!n.standalone&&!n.isMobileView&&n.isBicChat=="0"&&n.shouldShowFlyout&&(ar(),i=n.getClientRect(t),i)){u=(r=n.getClientRect(_d.body))===null||r===void 0?void 0:r.width;w&&_d.body.clientWidth&&(u=_d.body.clientWidth);var f=Math.min(u,_w.innerWidth),e=i.width,o=i.right,s=i.left;tr?(cu(f),vr(),au()):(vu(s,o,e,f),vr())}}function cu(i){var u,f,l,a;n.removeElementClass(t,n.FlyoutOverrideCN);var r=n.getClientRect(t),e=r===null||r===void 0?void 0:r.left,o=r===null||r===void 0?void 0:r.right,s=0,h=(u=n.getClientRect(n.ctrl))===null||u===void 0?void 0:u.right,c=(f=n.getClientRect(n.ctrl))===null||f===void 0?void 0:f.left;e&&e<s?(n.addElementClass(t,n.FlyoutOverrideCN),l=c?s-c+b:0,t.style.setProperty("left",l+"px","important")):o&&o>i&&(a=h?h-i+b:0,n.addElementClass(t,n.FlyoutOverrideCN),t.style.setProperty("right",a+"px","important"))}function lu(){var i,r,u,f,o=_ge("b_header"),e=n.getClientRect(o),s=(i=e===null||e===void 0?void 0:e.bottom)!==null&&i!==void 0?i:0,h=lr(),c=(f=w?(r=n.getClientRect(h))===null||r===void 0?void 0:r.top:(u=n.getClientRect(t))===null||u===void 0?void 0:u.top)!==null&&f!==void 0?f:0;return c<(t===null||t===void 0?void 0:t.clientHeight)+s}function au(){n.removeElementClass(t,n.FlyoutOverrideLCN);n.removeElementClass(t,n.FlyoutOverrideRCN);var i=n.getSaveControlViewPortOffsets(),s=i.left,v=i.right,r=i.top,u=i.bottom,h=i.saveControlHeight,e=n.getClientRect(t),c=e!==null&&e!==void 0?e:{},l=c.height,f=l===void 0?0:l,a=c.width,o=a===void 0?0:a;if(r<f&&u<f){if(s<o&&v<o)return;if(r+u+h+b<=f)return;ar();s>o?n.addElementClass(t,n.FlyoutOverrideLCN):n.addElementClass(t,n.FlyoutOverrideRCN);r>u?t.style.setProperty("top",u+h-f-b+"px","important"):t.style.setProperty("top",b-r+"px","important")}}function lr(){var t,i,r=n.ctrlBtn;return n.fixedSvCtrlBtnFdPage&&(r=(i=(t=n.currentHoveredItem===null||n.currentHoveredItem===void 0?void 0:n.currentHoveredItem.Element)===null||t===void 0?void 0:t.getElementsByClassName(n.svCtrlFixedBtnClassName))===null||i===void 0?void 0:i[0]),r}function ar(){n.removeElementClass(n.ctrl,n.NarrowImageCN);t.style.removeProperty("left");t.style.removeProperty("right");t.style.removeProperty("bottom");t.style.removeProperty("top");n.removeElementClass(n.ctrl,n.NarrowImageRightCN);n.removeElementClass(n.ctrl,n.NarrowImageBottomCN)}function vu(i,r,u,f){var e,o;i<0?r+u>f?(n.addElementClass(n.ctrl,n.NarrowImageCN),e=(r-f)/2,i+e<=0&&(e-=et),t.style.right=e+"px"):n.addElementClass(n.ctrl,n.NarrowImageRightCN):r>f&&(i<u?(n.addElementClass(n.ctrl,n.NarrowImageCN),e=i/2,w&&(e=u-(f-i)),r-e>=f&&(e+=et),t.style.left=-1*e+"px"):n.elementHasClass(n.hoverContainerSub,n.PersBtnHoveredCN)?(o=f-r,t.style.left=o-et+"px"):n.addElementClass(n.ctrl,n.NarrowImageRightCN))}function vr(){var s=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.flyoutpos,h=s?3:1,i=n.getClientRect(t),o=Math.min(n.getClientRect(_d.body).height,_w.innerHeight)-i.bottom,f=lr(),e,c,l,u;if(w&&(e=n.getClientRect(f),o=Math.min(n.getClientRect(_d.body).height,_w.innerHeight)-e.bottom),c=y.clientHeight+Math.min(3.5,Object.keys(n.localCollectionsMap).length)*48,l=nr&&lu(),(o<t.clientHeight/h||o<c/h)&&!l)if(n.addElementClass(n.ctrl,n.NarrowImageBottomCN),s){var e=n.getClientRect(n.ctrlBtn),b=n.getClientRect(n.currentHoveredItem.Element),k=_qs(".svbtnlbl",n.ctrlBtn);i=n.getClientRect(t);k&&(u=n.getClientRect(k),e.left-b.left<b.right-e.right?i.left-u.right<0&&u.right-i.right<0&&(t.style.bottom=n.ctrlBtn.clientHeight+"px"):i.left-u.left<0&&u.left-i.right<0&&(t.style.bottom=n.ctrlBtn.clientHeight+"px"))}else{var a=f.clientLeft,v=f.clientWidth,p=t.clientLeft,d=t.clientWidth;v>0&&a>=p&&a+v<=p+d&&(t.style.bottom=(r?n.ctrl.clientHeight+et:f.clientHeight)+"px")}else yu()}function yu(){var i,r;n.elementHasClass(n.hoverContainerSub,n.PersBtnHoveredCN)&&!!((i=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||i===void 0?void 0:i.scperbtn)&&t.clientHeight>0&&(t.style.top=(((r=_qs(".psvctrl",n.currentHoveredItem.Element))===null||r===void 0?void 0:r.clientHeight)||"24")+"px")}function pu(){d(v);n.removeInProgress()}function yr(){var i,r;if(ki){n.handleError(8,null);return}t&&n.shouldShowFlyout&&(n.addElementClass(n.ctrl,n.HasFlyoutCN),cr(),ai&&n.standalone||(n.logFlyoutShown(n.currentHoveredItem.Element),ai=!0),sj_evt.fire("onResetScroll"),n.flyoutDisplaying=!0,si(),(n.isMobileView||n.isBicChat!="0")&&!n.standalone&&(r=n.SwipeBehavior[+t.dataset.scmobfb||0]=="SwipeToCloseFixedSize"?"40vh":"60vh",e.style.setProperty(n.MaxHeightAttr,r),n.addElementClass(t,n.MobFlyoutShowCN),n.removeElementClass(t,n.MobFlyoutCloseCN),(i=_ge("svctrlhvrpnltxt"))===null||i===void 0?void 0:i.focus(),ti&&!n.mobileHistoryUpdated&&(n.updateWindowHistory({isSCMobile:1},_d.location.href),n.mobileHistoryUpdated=!0)))}function k(i){var r,u,f,e,o;(i===void 0&&(i=!1),t)&&(n.currentHoveredItem.Element&&((u=(r=_qs(".scperslbl",n.currentHoveredItem.Element))===null||r===void 0?void 0:r.classList)===null||u===void 0?void 0:u.remove("b_sld",n.LabelSlideCN),(e=(f=_qs("."+n.SvCtrlPersIcnCN,n.currentHoveredItem.Element))===null||f===void 0?void 0:f.classList)===null||e===void 0?void 0:e.remove("b_actv","b_scactv"),(o=_qs("."+n.SvCtrlPersIcnCN,n.currentHoveredItem.Element))===null||o===void 0?void 0:o.focus()),n.removeElementClass(n.ctrl,n.HasFlyoutCN),n.removeElementClass(n.hoverContainerSub,n.PersBtnHoveredCN),d(),si(),i||n.clearCurrentHoveredItem(),n.flyoutDisplaying=!1,n.setKeepFlyoutActive(!1),ii&&n.ctrlBtn&&n.addRemoveSlideLableClass(!1),(n.isMobileView||n.isBicChat!="0")&&!n.standalone&&(n.addElementClass(t,n.MobFlyoutCloseCN),n.removeElementClass(t,n.MobFlyoutShowCN),ti&&n.mobileHistoryUpdated&&(_w.history.back(),n.mobileHistoryUpdated=!1)),vt&&vt.replaceChildren(),at&&at.replaceChildren(),pt&&(pt.style.display="none"),yt&&(yt.style.display="none"))}function h(){pu();n.flyoutDisplaying||yr()}function pr(){h();sj_evt.fire("prismFocusChange",n.currentHoveredItem.Element)}function hi(i){i.relatedTarget&&(n.getKeepFlyoutActive()||(n.fixedSvCtrlBtnFdPage&&(n.currentHoveredItem.Element=n.currentFocusTarget),sj_pd(i),sj_sp(i),n.addElementClass(n.ctrl,n.HasFlyoutCN),n.logSvBtnHoverEvent(),n.hoverContainerSub&&n.addElementClass(n.hoverContainerSub,"b_schvr"),sj_evt.fire("onSaveHover"),t&&(dt&&!p?p=sb_st(pr,dt):pr())))}function wu(t){if(t.type==="focusout"){if(n.shiftKeyDown){n.currentFocusTarget&&n.currentFocusTarget.focus();t.stopImmediatePropagation();sj_sp(t);sj_pd(t);return}h();n.elementHasClass(l,n.FlyoutActiveCN)?n.nextFocusable===null||n.nextFocusable===void 0?void 0:n.nextFocusable.focus():c.focus();return}if(!n.getKeepFlyoutActive()){var i=t.relatedTarget;if(i){if(n.elementContains(n.ctrl,i))return;if(n.isElementInSpaceOfAnother(n.hoverContainer,i))return}n.clearCurrentHoveredItem();t.type==="mouseleave"&&k()}}function bu(t){var i=n.elementsFromPoint(t.clientX,t.clientY);i&&i.length>1&&i[1].click()}function wr(t){var i=t[n.TargetAttr];si_ct(i,!1,t);n.logLinkClick(n.currentHoveredItem.Element,ot);n.standalone&&ci(i.href,t);sj_sp(t)}function ku(t){var u=t.currentTarget,r,i;si_ct(u,!1,t);r=u.getAttribute(n.CollectionIdDataAttribute);n.logLinkClick(n.currentHoveredItem.Element,r);i=ft?r?"".concat(ft,"&collId=").concat(r):ft:"";i&&n.savedFormCode&&(i+="&FORM=".concat(n.savedFormCode));n.standalone?ci(i,t):du(t,i);sj_sp(t)}function ci(n,t){n&&(sj_evt.fire("onNewTabOpenRequest",n),t===null||t===void 0?void 0:t.preventDefault())}function du(n,t){var i;t&&((i=_w.open(t,"_blank"))===null||i===void 0?void 0:i.focus(),n.preventDefault())}function d(t){var r,i,f,e;if(c&&(n.removeElementClass(c,n.FlyoutActiveCN),r=t==st,r&&n.setKeepFlyoutActive(r),n.getKeepFlyoutActive()?n.addElementClass(n.ctrl,"b_scnapd"):n.removeElementClass(n.ctrl,"b_scnapd")),!t){c=null;sj_evt.fire(n.VisualStateChangedEN,1);return}n.elementHasClass(n.ctrl,"b_geterr")&&(s.textContent=rt[3],n.removeElementClass(s,n.ErrStateInvisibleCN),n.addElementClass(s,n.ErrStateVisibleCN),t=l);n.addElementClass(t,n.FlyoutActiveCN);t==v&&(n.addElementClass(u,n.FlyoutActiveCN),fr());c=t;i=null;switch(t){case v:f=_ge("svctrlpckr");f?(e=f.getAttribute("data-expanded")==="false",i=e?3:4):i=3;break;case l:i=5}sj_evt.fire(n.VisualStateChangedEN,i)}function gu(){i&&(ir(),sj_evt.fire(n.VisualStateChangedEN,2))}function li(t){var u=n.localSavedItemsMap[n.currentHoveredItem.Mid],i;u&&(u.numCollections>1||n.isBicChat!="0")||n.elementHasClass(n.ctrl,"b_geterr")?sj_evt.fire(n.ChevronToggleCollListEN):(i=n.currentHoveredItem.LatestCollId||n.latestCollId,!r||ui&&di||(i=n.latestCollId),n.handleSaveClick(i,"Btn",t))}function nf(){tt.textContent=gi;ni=!0}function tf(){n.flyoutDisplaying?k(!0):h()}function rf(){li(!0);n.removeInProgress()}n.isCreateDialogShowing=!1;n.mobileHistoryUpdated=!1;n.flyoutDisplaying=!1;var ai=!1,ot,c,u,o,f,g,st,l,s,a,e,y,ht,nt,ct,lt,t,at,vt,yt,pt,v,tt,i,vi,wt,yi,bt,kt,it,dt=0,p,rt,gt,pi,r=null,w=!1,wi=null,ut=null,ft=null,ni=!1,ti=!1,bi=!0,ii=!1,ri=!1,ki=!1,ui=null,di=!1,gi=null,nr=!1,tr=!1,fi=null,ei=null,et=5,b=12;n.handleButtonHoverIn=hi;n.openCollTgt=ku;n.openCollectionsPane=ci;n.onSaveControlClicked=li;n.toggleFlyout=tf;n.onSaveControlIcnClicked=rf;tu()}(SvCtrlV2||(SvCtrlV2={})),function(n){function ct(){n.collectionListContainer&&(n.collectionListContainer.scrollTop=0)}function lt(t){var i=t;if(/\/th(\/.*|)\?/i.test(t)){var u=n.isMobileView?"&w=64&h=64&c=7&r=0&p=0":"&w=40&h=40&c=7&r=0&p=0",r=t.split("?"),f=r[0],e=r[1];i=f+"?"+e.replace(/&?\b[whrc]=\d+/gi,"")+u}return i}function bt(i){var r=i[1],u=i[2];d(n.collectionList,[,r,u]);d(n.recentCollectionList,[,r,u]);d(t,[,r,u])}function d(t,i){var f=i[1],u=i[2],r;t&&(r=_qs("["+n.CollectionIdDataAttribute+'="'+f+'"] img',t),r)&&(u?r.src=lt(u):r.removeAttribute("src"))}function r(t,i,r){r===void 0&&(r=!1);var u=r?function(n){t.insertBefore(n,t.firstChild)}:function(n){t.appendChild(n)};n.iterateThroughList(i,u)}function u(t,i){var r=function(n,i){i&&t.setAttribute(n,i)};n.iterateOverObject(i,r)}function i(n,t){return sj_ce(n,null,t)}function kt(i){var u,r=i[1];if(r&&n.collectionList&&!(((u=n.localCollectionsCidMap[r])===null||u===void 0?void 0:u.length)>0)){var f=_qs("[".concat(n.CollectionIdDataAttribute,'="').concat(r,'"]'),n.collectionList),e=n.recentCollectionList&&_qs("[".concat(n.CollectionIdDataAttribute,'="').concat(r,'"]'),n.recentCollectionList),o=t&&_qs("[".concat(n.CollectionIdDataAttribute,'="').concat(r,'"]'),t);f&&n.collectionList.removeChild(f);n.recentCollectionList&&e&&n.recentCollectionList.removeChild(e);t&&o&&t.removeChild(o)}}function dt(i){var u=i[1],r;f&&(r=_qs("[".concat(n.SuggestedCollectionTitleAttribute,'="').concat(u,'"]'),f),r&&f.removeChild(r),f.childNodes.length==0&&s&&(s.style.display=l));t&&(r=_qs("[".concat(n.SuggestedCollectionTitleAttribute,'="').concat(u,'"]'),t),r&&t.removeChild(r),t.childNodes.length==0&&h&&(h.style.display=l))}function gt(t){var f,d=t[1],s=t[2],g=t[3],b=t[4],tt=t[5],it=t[6],k=t[7],c=k?n.recentCollectionList:n.collectionList,l,o,a,y,e,h;c&&!_qs("[".concat(n.CollectionIdDataAttribute,'="').concat(s,'"]'),c)&&(k&&p&&(p.style.display=v),l=i("div",n.SaveControlImageCN),o=sj_ce("img"),u(o,{role:"presentation"}),sj_be(o,"error",function(){o.removeAttribute("src")}),b&&(o.src=lt(b)),r(l,[o]),a=i("div",n.SaveControlLinkCN),y=i("p",n.SaveControlLinkPCN),y.textContent=g,r(a,[y]),e=i("li",n.SaveControlItemCN),u(e,(f={},f[n.CollectionIdDataAttribute]=s||null,f[n.KCTDataAttr]=tt||null,f.tabindex="-1",f.role="option",f["aria-selected"]="false",f)),it&&nt(e),h=[l,a],ht&&ni(h,s),at(h,s),r(e,h),r(c,[e],d),w[s]=e,n.addClickListener(e,n.collectionPickerItemListener,!0,!1))}function ni(t,f){var e,o,s;!c||n.isMobileView||ft||(o=i("div",n.SaveControlImage2CN),u(o,(e={},e[n.CollectionIdDataAttribute]=f||null,e.role="link",e.tabindex="0",e.title=a!==null&&a!==void 0?a:"",e)),s=i("div","opnClTgt"),r(o,[s]),n.addClickListener(o,n.openCollTgt,!0,!0),t.push(o))}function at(t,f,e){var s,o,h;e===void 0&&(e="");c&&!n.isMobileView&&b&&(o=i("div","cltpSaveBtn"),u(o,(s={},s[n.CollectionIdDataAttribute]=f||null,s)),h=i("span",""),h.textContent=e||k||"",r(o,[h]),t.push(o))}function g(t){var i,r,f;ct();i=!1;t===null||t===undefined?(r=y.getAttribute("data-expanded"),r!=="false"||ut||(n.logCollExpandClick(n.currentHoveredItem.Element),ut=!0),i=r==="true"?!1:!0):i=t;f=i?"true":"false";u(y,{"data-expanded":f});e&&u(e,{"aria-expanded":f});i?n.addElementClass(e,"xpnd"):n.removeElementClass(e,"xpnd");i&&sj_evt.fire(n.CollListExpandEN);n.standalone&&sj_evt.fire(n.VisualStateChangedEN,i?4:3)}function o(t,i){return i?_qs("["+n.CollectionIdDataAttribute+"='"+t+"']",i):null}function nt(t){var i;u(t,(i={},i[n.SavedDataAttr]="1",i["aria-selected"]="true",i))}function vt(t){var i;t.removeAttribute(n.SavedDataAttr);u(t,(i={},i["aria-selected"]="false",i))}function tt(n){n&&(nt(n),yt(n,!0))}function it(n){n&&(vt(n),yt(n,!1))}function yt(t,i){var r,u,f;i===void 0&&(i=!1);c&&!n.isMobileView&&b&&t&&(r=_qs(".cltpSaveBtn",t),r&&(u=_qs("span",r),u&&(f=i?ot:k,u.textContent=f||"")))}function ti(i){var r=i[1],u=i[2],f=u===void 0?!0:u;f&&(tt(o(r,n.collectionList)),tt(o(r,n.recentCollectionList)),tt(o(r,t)))}function ii(i){var r=i[1];it(o(r,n.collectionList));it(o(r,n.recentCollectionList));it(o(r,t))}function ri(t){var i=t[1],r=t[2];pt(n.collectionList,[,i,r]);pt(n.recentCollectionList,[,i,r])}function pt(t,i){var f=i[1],e=i[2],u,r;t&&(u=new Set,r=null,n.iterateThroughList(Array.prototype.slice.call(t.childNodes),function(t){var i=t.getAttribute(n.CollectionIdDataAttribute);f&&i in f?(nt(t),u.add(i)):vt(t);i==e&&(r=t)}),c&&!st&&(u.size>0?n.iterateThroughList(Array.prototype.slice.call(t.childNodes),function(i){u.has(i.getAttribute(n.CollectionIdDataAttribute))&&t.insertBefore(t.removeChild(i),t.firstChild)}):r&&r!==t.firstChild&&t.insertBefore(t.removeChild(r),t.firstChild)))}function wt(t,f){var e,h=i("div",n.SaveControlLinkCN),c=i("p",n.SaveControlLinkPCN),l,o,s;c.textContent=t;l=i("div",n.SaveControlImage3CN);r(h,[c]);o=i("li",n.SaveControlItemCN);u(o,(e={},e[n.CollectionIdDataAttribute]=n.SuggestedCollDummyId,e[n.SuggestedCollectionTitleAttribute]=t,e.tabindex="-1",e.role="option",e["aria-selected"]="false",e));s=[l,h];at(s,n.SuggestedCollDummyId,et);r(o,s);r(f,[o]);n.addClickListener(o,n.collectionPickerItemListener,!0,!1)}function ui(n){var t=n[1];f.replaceChildren();s&&(s.style.display=t==null||t.length==0?l:v);t.map(function(n){return wt(n,f)})}function fi(i){var o=i[1],s=i[2],u,f,e;t&&(u=0,t.replaceChildren(),o.slice(0,2).forEach(function(i){var s=i.title,o=i.id,f,e;u++;f=w[o];f&&f.parentNode&&t&&(e=f.cloneNode(!0),n.addClickListener(e,n.collectionPickerItemListener,!0,!1),r(t,[e]))}),s.slice(0,3-u).forEach(function(n){u++;wt(n,t)}),u==0&&n.defaultCollectionType&&(u++,f=w[n.defaultCollectionId],f&&f.parentNode&&t&&(e=f.cloneNode(!0),n.addClickListener(e,n.collectionPickerItemListener,!0,!1),r(t,[e]))),h&&(h.style.display=u>0?v:l))}function rt(i){var u,f,e,r;n.isCreateDialogShowing||(i.keyCode===38?(_d.activeElement.previousElementSibling&&_d.activeElement.previousElementSibling.focus(),sj_sp(i),sj_pd(i)):i.keyCode===40&&(r=".b_svcitm",_d.activeElement===t?(u=_qs(r,t))===null||u===void 0?void 0:u.focus():_d.activeElement===n.recentCollectionList?(f=_qs(r,n.recentCollectionList))===null||f===void 0?void 0:f.focus():_d.activeElement===n.collectionList?(e=_qs(r,n.collectionList))===null||e===void 0?void 0:e.focus():_d.activeElement.nextElementSibling&&_d.activeElement.nextElementSibling.focus(),sj_sp(i),sj_pd(i)))}function ei(){n.collectionList=_ge("svctrllst");n.recentCollectionList=_ge("svctrlrlst");y=_ge("svctrlpckr");n.collectionListContainer=_ge("svctrllstw");e=_ge("svctrlhvrpnlbtn");t=_ge("svctrltoplst");f=_ge("svctrlsuglst");s=_ge("svctrlsugtitle");h=_ge("svctrltoptitle");p=_ge("svctrlretitle");n.addOutListeners(t,function(n){return sj_sp(n)});n.addOutListeners(f,function(n){return sj_sp(n)});n.addClickListener(e,function(){return g()});sj_evt.bind(n.AddCollToListEN,gt,!0);sj_evt.bind(n.RemoveCollFromList,kt,!0);sj_evt.bind(n.RemoveCollFromSugList,dt,!0);sj_evt.bind(n.CurrentCollIdSetEN,ti);sj_evt.bind(n.CurrentCollIdUnsetEN,ii);sj_evt.bind(n.ChangeCollThumbnail,bt);sj_evt.bind("onResetScroll",ct);sj_evt.bind(n.HoverElementSetEN,ri);sj_evt.bind(n.HoverElementSuggestedCollectionEN,ui);sj_evt.bind(n.HoverElementTopChoicesEN,fi);sj_evt.bind(n.ChevronToggleCollListEN,function(){return g(!0)});sj_evt.bind(n.ControlAppendedEN,function(){return g(!1)});sj_evt.bind("onSaveHover",function(){e||n.fixedSvCtrlBtnFdPage||sj_evt.fire(n.CollListExpandEN)});n.addListenerToElement(n.collectionList,n.KeydownEN,rt);n.addListenerToElement(n.recentCollectionList,n.KeydownEN,rt);n.addListenerToElement(t,n.KeydownEN,rt);var i=(n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset)||{};ft=!!i.dsotb;a=i.ocltip;b=!!i.esb;k=i.svt;et=i.crt;ot=i.usvt;st=!!i.erc;c=!!i.sc3ft;ht=!!(i===null||i===void 0?void 0:i.elnks)}var l="none",v="block",y,f,t,s,h,p,w={},e,ut=!1,c=!1,ft=!1,a="",b=!1,k="",et="",ot="",st=!1,ht=!0;ei()}(SvCtrlV2||(SvCtrlV2={})),function(n){function b(r){var s=r.ComponentId,e=r.PredefinedType.APIItemType,f=r.MetaLocInfo,o=r.PersButtonClassName;f&&(t=f.MetadataLocationId,u=f.MetadataLocationAttr,l=f.MetaLocCompName,a=n.getUrlParamsForTelemetry(e),i=o,g())}function v(i){var r=null;return t&&(r=_ge(t),r||(r=n.getClosest(i,".".concat(t)))),r}function y(i){var r,f,u;if(t)if(r=_d.querySelectorAll("#".concat(t)),r){if(r.length===1)return r[0];for(f=0;f<r.length;f++){for(u=r[f];!u.classList.contains("curr")&&u[n.ParentElementAttr];)u=u[n.ParentElementAttr];if(u.classList.contains("curr"))return r[f]}}else return n.getClosest(i,".".concat(t))}function r(t){var r=t[n.TargetAttr];r&&(e=n.getClosest(r,".".concat(i)),n.metaLocElement=n.isMobileView?y(r):v(r),sj_evt.fire(n.PersButtonInteractEN,e,n.metaLocElement,u,a,l),sj_evt.fire(n.ChevronToggleCollListEN))}function h(t){if(t.type==="focusout"&&!n.shiftKeyDown){var i=t[n.RelatedTargetAttr];i&&(n.nextFocusable=i);n.ctrlBtn.focus();sj_evt.fire(n.SaveButtonFocusEN);return}}function k(t){var i,u;if(t){var f=_qs(".sv3colnm"),e=_qs(".sv3pbtn"),s=((i=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||i===void 0?void 0:i.scpbv3)&&f&&e;n.isMobileView||((u=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||u===void 0?void 0:u.scperbtn)||s||(n.addInListeners(t,r),n.addOutListeners(t,h));s?(n.addClickListener(e,function(t){n.shouldShowFlyout=!1;o(t)},!0,!0),n.addClickListener(f,function(t){n.shouldShowFlyout=!0;r(t)},!0,!0)):n.addClickListener(t,o,!0,!0);p(t)}}function p(t){var r,i,e,o;t&&(r=!1,i=n.isMobileView?y(t):v(t),i&&u&&(e=n.metadataFromElement(i,u),o=n.getMetadataId(e)||n.findMatchingGenericItemId(e),o&&o in n.localSavedItemsMap?(r=!0,n.elementHasClass(i,n.SavedCN)||n.addElementClass(i,n.SavedCN)):n.removeElementClass(i,n.SavedCN),!f&&n.persBtnSavedCN&&d(t,r)))}function d(t,i){var r=i?n.svdItmLabel:n.svItmLabel,u,f,e,s,o;r&&(u=t.getAttribute(n.AltTextAttr),u&&u!==r&&t.setAttribute(n.AltTextAttr,r),f=t.getAttribute(n.TitleAttr),f&&f!==r&&t.setAttribute(n.TitleAttr,r),e=t.getAttribute(n.AriaLabelAttr),e&&e!==r&&t.setAttribute(n.AriaLabelAttr,r),t.hasAttribute(n.AriaPressedAttr)&&(s=i?!0:!1,t.setAttribute(n.AriaPressedAttr,s.toString())),o=_qs(".text",t),o&&(o.innerHTML=r),i?n.addElementClass(t,n.persBtnSavedCN):n.removeElementClass(t,n.persBtnSavedCN))}function o(t){t[n.TargetAttr]&&(e=n.getClosest(t[n.TargetAttr],".".concat(i)));var u=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset,f=(u===null||u===void 0?void 0:u.scpbv3)&&_qs(".sv3pbtn")&&_qs(".sv3colnm");if(n.isMobileView||(u===null||u===void 0?void 0:u.scperbtn)||f)r(t),n.handleButtonClick(t);else n.onSaveControlClicked(!0)}function g(){if(i){c();var t=_d.body.querySelectorAll("."+i);t&&(s=t,n.iterateThroughList(t,k))}}function w(t){var r=t[0],i=t[3],u=t[4],o=t[5];o&&i&&(f?(r===n.SaveAddEN&&n.localSavedItemsMap[i]||r===n.SaveDelEN&&!n.localSavedItemsMap[i])&&f(u):p(e))}function c(){s&&n.iterateThroughList(s,nt)}function nt(n){n&&(sj_ue(n,"mouseenter",r),sj_ue(n,"focusin",r),sj_ue(n,"mouseleave",h),sj_ue(n,"focusout",h),sj_ue(n,"click",o),sj_ue(n,"keydown",o),n=null)}var t,u,l,a,f,i,s,e=null;sj_evt.bind("onSaveRegButton",function(n){var t=n[1];f=t},!0);sj_evt.bind(n.PartnerRegisterEN,function(n){var t=n[1];b(t)});sj_evt.bind(n.DeregisterPersBtnEN,c);sj_evt.bind("ajax.unload",function(){c()});sj_evt.bind(n.SaveDelEN,w);sj_evt.bind(n.SaveAddEN,w)}(SvCtrlV2||(SvCtrlV2={})),function(n){function i(i){var u,f,e,o,r,s;if(!((u=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||u===void 0?void 0:u.scpbv3)||!_qs(".sv3pbtn")||!n.elementHasClass(n.hoverContainerSub,n.PersBtnHoveredCN)||i[n.CurrentTargetAttr]!==n.ctrlBtn){if(n.fireOverlapping(i),sj_sp(i),r=((f=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||f===void 0?void 0:f.svicnclkb)||"Open",s=(e=n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset)===null||e===void 0?void 0:e.scctcls,s!="0"&&(n.flyoutDisplaying&&t?s=="2"&&(n.setKeepFlyoutActive(!1),n.hideHoverContainer(),t=!1):(n.setKeepFlyoutActive(!0),t=!0)),sj_evt.fire(n.SaveButtonClickEN),sj_evt.fire(n.ChevronToggleCollListEN),r==="OpenSave"||r==="OpenSaveRemove")n.onSaveControlClicked(r==="OpenSave"?!1:!0);i.key=="Enter"&&((o=_ge("svctrlhvrpnling"))===null||o===void 0?void 0:o.focus())}}function r(){n.ctrlBtn&&n.addClickListener(n.ctrlBtn,i,!0)}var t=!1;n.handleButtonClick=i;r()}(SvCtrlV2||(SvCtrlV2={}))